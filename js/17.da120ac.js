(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"3Wue":function(t,e,s){},"5+WA":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-toolbar",{attrs:{color:"faded"}},[s("q-toolbar-title",[s("span",{staticClass:"q-title"},[t._v(t._s(t.getEventName))]),s("q-breadcrumbs",{attrs:{color:"white","active-color":"info",separator:">"}},[s("q-breadcrumbs-el",{staticClass:"q-subheading text-weight-bold",attrs:{active:"",color:"info",label:"Events",to:"/events"}}),s("q-breadcrumbs-el",{staticClass:"q-subheading text-weight-bold",attrs:{active:"",color:"info",label:"Seasons"}})],1)],1),t.getSeasons!==[]||t.isLastSeasonClosed?s("q-btn",{attrs:{size:"md",color:"positive",label:"New Season"},on:{click:function(e){t.seasonModal=!t.seasonModal}}}):t._e()],1),s("q-table",{staticClass:"q-ma-md",attrs:{data:t.getSeasons,columns:t.columns,pagination:t.pagination,separator:"cell","no-data-label":"No Season yet","row-key":"eventCode"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body-cell-seasonStart",fn:function(e){return s("q-td",{attrs:{props:e}},[t._v("\n      \t"+t._s(t.$moment(t.getSeasonStart(e)).format("ll"))+"\n      ")])}},{key:"body-cell-seasonEnd",fn:function(e){return s("q-td",{attrs:{props:e}},[t._v("\n      \t"+t._s(t.$moment(e.row.seasonEnd).format("ll"))+"\n      ")])}},{key:"body-cell-batches",fn:function(e){return s("q-td",{attrs:{props:e}},[s("q-btn",{attrs:{rounded:"",color:"positive",size:"sm",label:"View Batches"},on:{click:function(s){t.viewBatches(e.row)}}},[t.hasMissingDetails(e)?s("q-chip",{attrs:{floating:"",color:"warning"}},[s("q-icon",{attrs:{name:"warning"}})],1):t._e()],1)],1)}},{key:"body-cell-participants",fn:function(e){return s("q-td",{attrs:{props:e}},[t._v("\n      \t"+t._s(t.getNumOfParticipants(e.row))+"\n      ")])}},{key:"body-cell-actions",fn:function(e){return s("q-td",{attrs:{props:e}},[t.isReadyToLaunch?s("q-chip",{attrs:{square:"",color:"info"}},[t._v("Ready to Launch")]):t._e(),s("br"),s("br"),t.isSeasonOngoing(e.row)?s("q-btn",{attrs:{size:"sm",color:"positive",icon:"launch"},on:{click:function(s){t.isSeasonBatchNotComplete(e.row)}}},[t._v(" Launch")]):t._e(),t.isSeasonOngoing(e.row)?t._e():s("q-btn",{attrs:{size:"sm",color:"negative",icon:"cancel"},on:{click:function(s){t.standbySeason(e.row)}}},[t._v("cancel")]),t.isHasBatches(e.row)?s("q-btn",{attrs:{color:"negative",icon:"cancel"},on:{click:function(s){t.deleteSeason(e.row)}}}):t._e()],1)}}])}),s("q-modal",{attrs:{maximized:""},on:{show:t.hasSavedDraft,hide:t.clearSeasonModal},model:{value:t.seasonModal,callback:function(e){t.seasonModal=e},expression:"seasonModal"}},[s("q-modal-layout",{attrs:{"content-class":"","footer-class":"","footer-style":""}},[s("q-toolbar",{attrs:{slot:"header"},slot:"header"},[s("q-toolbar-title",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.isEdit?"Edit Season":"New Season")+"\n\t\t\t\t\t\t")]),s("q-btn",{attrs:{rounded:"",icon:"save alt",color:"secondary",size:"sm",label:"save as draft"},on:{click:function(e){t.saveAsDraft()}}}),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(e){t.seasonModal=!t.seasonModal}}})],1),s("q-stepper",{ref:"stepper",attrs:{color:"secondary","alternative-labels":""}},[s("q-step",{attrs:{default:"",name:"first",title:"Season Information"}},[s("div",{staticClass:"content-class q-ma-md"},[s("q-select",{staticClass:"q-mx-md",attrs:{"stack-label":"Course","float-label":"Select Event Type",error:t.$v.season.course.$error,options:t.courseOpt},model:{value:t.season.course,callback:function(e){t.$set(t.season,"course",e)},expression:"season.course"}}),s("q-btn",{staticClass:"q-mx-md",attrs:{flat:"",label:"add new course",icon:"add",color:"info",size:"sm"},on:{click:function(e){t.newCourseModal=!0}}}),s("br"),t.season.course?s("q-chip",{staticClass:"q-mx-md",attrs:{square:"",color:"info"}},[s("span",{staticClass:"q-caption"},[t._v("Activities:\n\t\t\t\t\t\t\t\t\t  "),t._l(t.getCourseActivities,function(e,a){return s("span",{key:a,staticClass:"q-caption"},[t._v("\n\t\t\t\t\t\t\t\t\t  \t, "+t._s(e.label)+"\n\t\t\t\t\t\t\t\t\t  ")])})],2)]):t._e(),s("q-input",{staticClass:"q-ma-md",attrs:{readonly:"","hide-underline":"",type:"number","stack-label":"Season Number"},model:{value:t.getLatestSeason,callback:function(e){t.getLatestSeason=e},expression:"getLatestSeason"}}),s("q-field",{staticClass:"q-ma-md"},[s("q-datetime",{attrs:{format:"MMM-DD-YYYY","stack-label":"Season Start (1st Batch Orientation)",min:t.getSeasonStartMinDate,error:t.$v.season.seasonStart.$error||t.seasonStartError},on:{change:t.seasonStartIsWeekEnd},model:{value:t.season.seasonStart,callback:function(e){t.$set(t.season,"seasonStart",e)},expression:"season.seasonStart"}})],1),s("q-field",{staticClass:"q-ma-md",attrs:{"error-label":"Please pick weekend date"}},[s("q-datetime",{attrs:{disable:t.isSeasonStartEmpty,format:"MMM-DD-YYYY","stack-label":"Season End (Final Event)",min:t.$mathMixin.addDays(new Date(t.season.seasonStart),44),error:t.$v.season.seasonEnd.$error||t.seasonEndError},on:{change:t.seasonEndIsWeekEnd},model:{value:t.season.seasonEnd,callback:function(e){t.$set(t.season,"seasonEnd",e)},expression:"season.seasonEnd"}})],1),s("q-item-separator"),s("q-field",{staticClass:"q-ma-md",attrs:{"error-label":"Invalid TIcket Count"}},[s("q-input",{attrs:{type:"number","stack-label":"Ticket Count",error:t.$v.season.ticketCount.$error},model:{value:t.season.ticketCount,callback:function(e){t.$set(t.season,"ticketCount",e)},expression:"season.ticketCount"}})],1),s("q-field",{staticClass:"q-ma-md",attrs:{"error-label":"Invalid Ticket Price"}},[s("q-input",{attrs:{type:"number",prefix:"P ","stack-label":"Ticket Price",error:t.$v.season.ticketPrice.$error},model:{value:t.season.ticketPrice,callback:function(e){t.$set(t.season,"ticketPrice",e)},expression:"season.ticketPrice"}})],1),s("q-field",{staticClass:"q-ma-md",attrs:{"error-label":"Invalid Registration Fee"}},[s("q-input",{attrs:{type:"number","stack-label":"Pre-Registration Fee",prefix:"P",error:t.$v.season.discount.$error},model:{value:t.season.discount,callback:function(e){t.$set(t.season,"discount",e)},expression:"season.discount"}})],1),s("q-field",{staticClass:"q-mx-md",attrs:{label:"Total Amount"}},[s("q-input",{staticClass:"q-mx-md",attrs:{"hide-underline":"",readonly:"",type:"text",prefix:"P ","float-label":"Cash"},model:{value:t.getTotalAmount,callback:function(e){t.getTotalAmount=e},expression:"getTotalAmount"}}),s("q-input",{staticClass:"q-mx-md",attrs:{"hide-underline":"",readonly:"",type:"text",prefix:"P ","float-label":"Installment"},model:{value:t.getInstallmentAmount,callback:function(e){t.getInstallmentAmount=e},expression:"getInstallmentAmount"}})],1),s("q-field",{staticClass:"q-ma-md",attrs:{"error-label":"Invalid Number of Payments"}},[s("q-input",{attrs:{type:"number","stack-label":"Number of Payments",error:t.$v.season.numberOfPayments.$error},model:{value:t.season.numberOfPayments,callback:function(e){t.$set(t.season,"numberOfPayments",e)},expression:"season.numberOfPayments"}})],1),s("q-field",{attrs:{"error-label":"Please check fields"}},[t.isHasWorkshop?s("div",{staticClass:"row"},[s("q-input",{staticClass:"q-ma-md",attrs:{type:"number","stack-label":"Number of Workshops",error:t.$v.season.numberOfWorkshops.$error},model:{value:t.season.numberOfWorkshops,callback:function(e){t.$set(t.season,"numberOfWorkshops",e)},expression:"season.numberOfWorkshops"}})],1):t._e()]),s("q-select",{staticClass:"q-ma-md",attrs:{"float-label":"Color Code (for scheduling purpose)",options:t.colorOpt,error:t.$v.season.colorCode.$error},model:{value:t.season.colorCode,callback:function(e){t.$set(t.season,"colorCode",e)},expression:"season.colorCode"}})],1),s("q-stepper-navigation",{staticClass:"flex"},[t.isEdit?t._e():s("q-btn",{staticClass:"q-ma-md fixed-bottom-right",attrs:{color:"positive",label:"Next",icon:"navigate_next"},on:{click:function(e){t.createActivity()}}})],1)],1),s("q-step",{attrs:{name:"second",icon:"calendar_today",title:"Activity Schedules"}},[s("activities",{ref:"activityRef",attrs:{seasonStart:t.season.seasonStart,seasonEnd:t.season.seasonEnd,latestSeason:t.getLatestSeason,courseKey:t.season.course,eventKey:t.eventKey,eventCode:t.getEventCode,seasonNumber:t.getLatestSeason,classes:t.season.colorCode,totalAmount:t.getInstallmentAmount2,numberOfPayments:parseInt(t.season.numberOfPayments),batchCapacity:t.season.batchCapacity,isRestoreAsDraft:t.isRestoreAsDraft}}),s("q-stepper-navigation",[s("q-btn",{staticClass:"q-ma-md fixed-bottom-left",attrs:{color:"secondary",icon:"arrow back ios",label:"Back"},on:{click:function(e){t.$refs.stepper.previous(),t.isRestoreAsDraft=!1}}}),s("q-btn",{staticClass:"q-ma-md fixed-bottom-right",attrs:{color:"positive","icon-right":"arrow forward ios",label:"Next"},on:{click:function(e){t.toPreviewActivity()}}})],1)],1),s("q-step",{attrs:{name:"third",icon:"visibility",title:"Preview"}},[s("div",{staticClass:"q-pb-md"},[s("preview",{ref:"previewRef",attrs:{course:t.season.course,discount:t.season.discount,eventKey:t.eventKey,eventCode:t.getEventCode,eventName:t.getEventName,numberOfPayments:t.season.numberOfPayments,numberOfWorkshops:t.season.numberOfWorkshops,seasonNumber:t.getLatestSeason,ticketCount:t.season.ticketCount,ticketPrice:t.season.ticketPrice,totalAmount:t.getInstallmentAmount2,seasonDraftKey:t.getSeasonDraftKey,hasSeasonDraft:t.checkIfHasSavedDraft}})],1),s("q-stepper-navigation",[s("q-btn",{staticClass:"q-ma-md fixed-bottom-left",attrs:{color:"secondary",icon:"arrow back ios",label:"Back"},on:{click:function(e){t.toBackActivity()}}}),s("q-btn",{staticClass:"q-ma-md fixed-bottom-right",attrs:{color:"positive","icon-right":"arrow forward ios",label:"Finish"},on:{click:function(e){t.confirmActivities(),t.isRestoreAsDraft=!1}}})],1)],1)],1),s("q-inner-loading",{attrs:{visible:t.seasonLoading}},[s("q-spinner",{attrs:{size:"50px",color:"primary"}})],1)],1)],1),s("q-modal",{attrs:{"content-css":{minWidth:"60vw",minHeight:"60vh"}},on:{hide:t.clearSeasonModal},model:{value:t.activityModal,callback:function(e){t.activityModal=e},expression:"activityModal"}},[s("q-modal-layout",{attrs:{"footer-style":"{fontSize: '24px', fontWeight: 'bold'}"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("q-toolbar",[s("q-toolbar-title",[t._v("\n\t\t\t\t\t\t\t\tActivities\n\t\t\t\t\t\t\t")]),s("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(e){t.activityModal=!t.activityModal}}})],1)],1),s("div",[s("activity-modal",{ref:"activityRef"})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[t.isEdit?t._e():s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Save"},on:{click:t.viewActivities}})],1)])],1),s("q-modal",{attrs:{maximized:"","content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.newCourseModal,callback:function(e){t.newCourseModal=e},expression:"newCourseModal"}},[s("q-modal-layout",{attrs:{"footer-style":"{ height: '24px' }"}},[s("q-toolbar",{attrs:{slot:"header"},slot:"header"},[s("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",round:"",dense:"",icon:"keyboard_arrow_left"}}),s("q-toolbar-title",[t._v("\n\t\t\t\t\t\t\tNew Course\n\t\t\t\t\t\t")])],1),s("div",{staticClass:"bg-primary row flex justify-center",attrs:{slot:"footer"},slot:"footer"},[t.isEdit?t._e():s("q-btn",{attrs:{icon:"save",color:"positive",label:"Save"},on:{click:function(e){t.saveNewCourse2()}}})],1),s("new-course",{ref:"newCourseRef"})],1)],1),s("q-modal",{attrs:{"content-css":{minWidth:"50vw",minHeight:"50vh"}},model:{value:t.editSeasonModal,callback:function(e){t.editSeasonModal=e},expression:"editSeasonModal"}},[s("q-modal-layout",[s("q-toolbar",{attrs:{slot:"header"},slot:"header"},[s("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",round:"",dense:"",icon:"keyboard_arrow_left"}}),s("q-toolbar-title",[t._v("\n\t\t\t        Edit Season\n\t\t\t      ")])],1),s("div",{staticClass:"q-pa-md"},[s("q-select",{staticClass:"q-mx-md",attrs:{"stack-label":"Course","float-label":"Select Event Type",error:t.$v.season.course.$error,options:t.courseOpt},model:{value:t.season.course,callback:function(e){t.$set(t.season,"course",e)},expression:"season.course"}}),s("q-btn",{staticClass:"q-mx-md",attrs:{flat:"",label:"add new course",icon:"add",color:"info",size:"sm"},on:{click:function(e){t.$router.push("/coursesSettings")}}}),s("br"),s("q-chip",{staticClass:"q-mx-md",attrs:{square:"",color:"info"}},[s("span",{staticClass:"q-caption"},[t._v("Activities:\n\t\t\t\t\t\t\t\t\t  "),t._l(t.getCourseActivities,function(e,a){return s("span",{key:a,staticClass:"q-caption"},[t._v("\n\t\t\t\t\t\t\t\t\t  \t, "+t._s(e.label)+"\n\t\t\t\t\t\t\t\t\t  ")])})],2)]),s("q-input",{staticClass:"q-ma-md",attrs:{readonly:"","hide-underline":"",type:"number","stack-label":"Season Number"},model:{value:t.getLatestSeason,callback:function(e){t.getLatestSeason=e},expression:"getLatestSeason"}}),s("q-datetime",{staticClass:"q-ma-md",attrs:{format:"MMM-DD-YYYY","stack-label":"Season Start",min:t.$mathMixin.addDays(new Date,1),error:t.$v.season.seasonStart.$error},model:{value:t.season.seasonStart,callback:function(e){t.$set(t.season,"seasonStart",e)},expression:"season.seasonStart"}}),s("q-datetime",{staticClass:"q-ma-md",attrs:{disable:t.isSeasonStartEmpty,format:"MMM-DD-YYYY","stack-label":"Season End",min:t.$mathMixin.addDays(new Date(t.season.seasonStart),30),error:t.$v.season.seasonEnd.$error},model:{value:t.season.seasonEnd,callback:function(e){t.$set(t.season,"seasonEnd",e)},expression:"season.seasonEnd"}}),s("q-item-separator"),s("q-input",{staticClass:"q-ma-md",attrs:{type:"number","stack-label":"Ticket Count",error:t.$v.season.ticketCount.$error},model:{value:t.season.ticketCount,callback:function(e){t.$set(t.season,"ticketCount",e)},expression:"season.ticketCount"}}),s("q-input",{staticClass:"q-ma-md",attrs:{type:"number","stack-label":"Ticket Price",error:t.$v.season.ticketPrice.$error},model:{value:t.season.ticketPrice,callback:function(e){t.$set(t.season,"ticketPrice",e)},expression:"season.ticketPrice"}}),s("q-input",{staticClass:"q-ma-md",attrs:{type:"number","stack-label":"Pre-Registration Fee",prefix:"P",error:t.$v.season.discount.$error},model:{value:t.season.discount,callback:function(e){t.$set(t.season,"discount",e)},expression:"season.discount"}}),s("q-input",{staticClass:"q-ma-md",attrs:{type:"number","stack-label":"Number of Payments",error:t.$v.season.numberOfPayments.$error},model:{value:t.season.numberOfPayments,callback:function(e){t.$set(t.season,"numberOfPayments",e)},expression:"season.numberOfPayments"}}),t.isHasWorkshop?s("q-input",{staticClass:"q-ma-md",attrs:{type:"number","stack-label":"Number of Workshops"},model:{value:t.season.numberOfWorkshops,callback:function(e){t.$set(t.season,"numberOfWorkshops",e)},expression:"season.numberOfWorkshops"}}):t._e(),s("q-field",{attrs:{label:"Total Amount"}},[s("q-input",{staticClass:"q-mx-md",attrs:{disable:"",type:"text",prefix:"P "},model:{value:t.getTotalAmount,callback:function(e){t.getTotalAmount=e},expression:"getTotalAmount"}})],1),s("q-select",{staticClass:"q-ma-md",attrs:{"float-label":"Color Code (for scheduling purpose)",options:t.colorOpt,error:t.$v.season.colorCode.$error},model:{value:t.season.colorCode,callback:function(e){t.$set(t.season,"colorCode",e)},expression:"season.colorCode"}})],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"row"},[s("q-btn",{staticClass:"col",attrs:{label:"Save",color:"positive"}}),s("q-btn",{staticClass:"col",attrs:{label:"cancel",color:"negative"}})],1)])],1)],1)],1)},i=[];a._withStripped=!0;s("SRfc"),s("ls82");var o=s("yXPU"),n=s.n(o),r=s("RIqP"),c=s.n(r),l=(s("a1Th"),s("pIFo"),s("rGqo"),s("dRSK"),s("INYr"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"docs-input row justify-center"},[s("div",{staticClass:"col"},[s("q-btn",{attrs:{label:"test"},on:{click:t.test}}),s("q-field",{staticClass:"q-my-md",attrs:{label:"Orientation",orientation:"vertical","label-width":3}},[s("p",[t._v(t._s(t.$moment(t.orientation.startDate).format("ll")))]),t.getOrientation.time?s("q-datetime",{attrs:{format:"h:mm A","stack-label":"Time",type:"time"},model:{value:t.orientation.time,callback:function(e){t.$set(t.orientation,"time",e)},expression:"orientation.time"}}):t._e(),t.getOrientation.location?s("q-input",{attrs:{"float-label":"Location",type:"textarea","max-height":100,rows:"7"},model:{value:t.orientation.location,callback:function(e){t.$set(t.orientation,"location",e)},expression:"orientation.location"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchLocation,selected:t.selected}})],1):t._e(),s("q-input",{attrs:{"float-label":"Details",type:"textarea","max-height":50,rows:"5"},model:{value:t.orientation.details,callback:function(e){t.$set(t.orientation,"details",e)},expression:"orientation.details"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchDetails,selected:t.selected}})],1)],1),s("q-item-separator"),s("q-field",{staticClass:"q-my-md",attrs:{label:"Payment Amount",error:t.isSameTotal,"error-label":"Please check Total Amount"}},[s("p",{staticClass:"caption"},[t._v("Season Rate: "+t._s(t.totalAmount))]),t._l(t.getNumberOfPayments,function(e,a){return s("div",{key:e},[s("q-input",{staticClass:"q-my-md",attrs:{prefix:"P ","stack-label":"Payment "+(a+1),type:"number"},model:{value:t.payments.amount[a],callback:function(e){t.$set(t.payments.amount,a,e)},expression:"payments.amount[index]"}})],1)}),s("q-item-separator"),s("span",{staticClass:"caption text-weight-bold"},[t._v("Total "+t._s(t._f("currency")(t.getTotal)))])],2),s("q-item-separator"),s("q-field",{staticClass:"q-my-md",attrs:{label:"Photoshoot",orientation:"vertical","label-width":3}},[s("p",[t._v(t._s(t.$moment(t.photoshoot.startDate).format("ll")))]),t.getPhotoshoot.time?s("q-datetime",{attrs:{format:"h:mm A","stack-label":"Time",type:"time"},model:{value:t.photoshoot.time,callback:function(e){t.$set(t.photoshoot,"time",e)},expression:"photoshoot.time"}}):t._e(),t.getPhotoshoot.location?s("q-input",{attrs:{"float-label":"Location","max-height":100,rows:"7",type:"textarea"},model:{value:t.photoshoot.location,callback:function(e){t.$set(t.photoshoot,"location",e)},expression:"photoshoot.location"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchLocation,selected:t.selected}})],1):t._e(),s("q-input",{attrs:{"float-label":"Details","max-height":50,rows:"5",type:"textarea"},model:{value:t.photoshoot.details,callback:function(e){t.$set(t.photoshoot,"details",e)},expression:"photoshoot.details"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchDetails,selected:t.selected}})],1)],1),s("q-item-separator"),s("q-field",{staticClass:"q-my-md",attrs:{label:"Photoliking",orientation:"vertical","label-width":3}},[s("p",[t._v(t._s(t.$moment(t.photoliking.startDate).format("ll")))]),s("q-datetime",{attrs:{min:t.photoliking.startDate,max:new Date(t.seasonEnd),format:"MMM-DD-YYYY","stack-label":"Due Date"},model:{value:t.photoliking.dueDate,callback:function(e){t.$set(t.photoliking,"dueDate",e)},expression:"photoliking.dueDate"}})],1),s("q-item-separator"),t.isHasWorkshop?s("q-field",{staticClass:"q-my-md",attrs:{label:"Workshops",error:t.isWorkshopError,"error-label":"Please check your date and time"}},t._l(t.numberOfWorkshops,function(e,a){return s("div",{key:a,staticClass:"q-my-md"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("span",{staticClass:"caption q-my-md"},[t._v("Workshop "+t._s(a+1))]),s("p",[t._v("Possible Dates: "),s("br"),t._l(t.upcomingSundays2,function(e,i){return s("q-btn-group",{key:i},[t.alreadySelectedSunday(e)?s("q-btn",{attrs:{size:"sm"},on:{click:function(s){t.isHasEmptyWorkshops,t.selectUpcomingDate(a,e)}}},[t._v("\n\t\t\t\t\t\t\t\t  \t"+t._s(t.$moment(e).format("ll"))+"\n\t\t\t\t\t\t\t\t\t")]):t._e()],1)})],2),s("q-datetime",{key:Date.now(),attrs:{min:t.workshopMinDate(e),max:new Date(t.seasonEnd),format:"MMM-DD-YYYY","stack-label":"Date",type:"date"},model:{value:t.workshops.startDate[a],callback:function(e){t.$set(t.workshops.startDate,a,e)},expression:"workshops.startDate[i]"}}),s("q-datetime",{attrs:{format:"h:mm A","stack-label":"Time",type:"time"},model:{value:t.workshops.time[a],callback:function(e){t.$set(t.workshops.time,a,e)},expression:"workshops.time[i]"}}),t.getWorkshop.location?s("q-input",{attrs:{"float-label":"Location","max-height":100,rows:"7",type:"textarea"},model:{value:t.workshops.location[a],callback:function(e){t.$set(t.workshops.location,a,e)},expression:"workshops.location[i]"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchLocation,selected:t.selected}})],1):t._e(),t.getWorkshop.details?s("q-input",{attrs:{"float-label":"Details",type:"textarea","max-height":50,rows:"5"},model:{value:t.workshops.details[a],callback:function(e){t.$set(t.workshops.details,a,e)},expression:"workshops.details[i]"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchDetails,selected:t.selected}})],1):t._e()],1),s("div",{staticClass:"col-2"},[t.hasNewWorkshop(a)?s("q-btn",{staticClass:"q-ma-md",attrs:{disable:t.disableAddWorkshop(a),round:"",size:"sm",icon:"add"},on:{click:function(e){t.numberOfWorkshops++,t.isHasEmptyWorkshops()}}}):t._e(),a>=1?s("q-btn",{staticClass:"q-ma-md",attrs:{round:"",size:"sm",icon:"remove"},on:{click:function(e){t.removeWorkshop(a)}}}):t._e()],1),s("q-item-separator")],1)])})):t._e(),t._l(t.otherActivities,function(e,a){return s("div",{key:a},[s("q-item-separator"),s("q-field",{staticClass:"text-black",attrs:{label:t.setActivityLabel(e),orientation:"vertical","label-width":3,error:t.isOtherActivityError,"error-label":"Please check date and time"}},[s("q-datetime",{attrs:{min:t.otherActivityMinDate(e,a),format:"MMM-DD-YYYY",max:new Date(t.seasonEnd),"stack-label":"Date",type:"date"},model:{value:t.otherActivity.startDate[a],callback:function(e){t.$set(t.otherActivity.startDate,a,e)},expression:"otherActivity.startDate[i]"}}),e.time?s("q-datetime",{attrs:{format:"h:mm A","stack-label":"Time",type:"time"},model:{value:t.otherActivity.time[a],callback:function(e){t.$set(t.otherActivity.time,a,e)},expression:"otherActivity.time[i]"}}):t._e(),e.location?s("q-input",{attrs:{"float-label":"Location","max-height":100,rows:"7",type:"textarea"},model:{value:t.otherActivity.location[a],callback:function(e){t.$set(t.otherActivity.location,a,e)},expression:"otherActivity.location[i]"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchLocation,selected:t.selected}})],1):t._e(),e.details?s("q-input",{attrs:{"float-label":"Details","max-height":50,rows:"5",type:"textarea"},model:{value:t.otherActivity.details[a],callback:function(e){t.$set(t.otherActivity.details,a,e)},expression:"otherActivity.details[i]"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchDetails,selected:t.selected}})],1):t._e(),e.dueDate?s("q-datetime",{attrs:{min:t.$mathMixin.addDays(new Date(t.otherActivity.startDate[a]),1).toString(),format:"MMM-DD-YYYY","stack-label":"Due Date"},model:{value:t.otherActivity.dueDate[a],callback:function(e){t.$set(t.otherActivity.dueDate,a,e)},expression:"otherActivity.dueDate[i]"}}):t._e()],1)],1)}),s("q-item-separator"),s("q-field",{staticClass:"q-my-md",attrs:{label:t.getFinalActivity.label,orientation:"vertical","label-width":3}},[s("p",[t._v(t._s(t.$moment(t.finalActivity.startDate).format("ll")))]),t.getFinalActivity.time?s("q-datetime",{attrs:{format:"h:mm A","stack-label":"Time",type:"time"},model:{value:t.finalActivity.time,callback:function(e){t.$set(t.finalActivity,"time",e)},expression:"finalActivity.time"}}):t._e(),t.getFinalActivity.location?s("q-input",{attrs:{"float-label":"Location","max-height":100,rows:"7",type:"textarea"},model:{value:t.finalActivity.location,callback:function(e){t.$set(t.finalActivity,"location",e)},expression:"finalActivity.location"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchLocation,selected:t.selected}})],1):t._e(),t.getFinalActivity.details?s("q-input",{attrs:{"max-height":50,rows:"5","float-label":"Details",type:"textarea"},model:{value:t.finalActivity.details,callback:function(e){t.$set(t.finalActivity,"details",e)},expression:"finalActivity.details"}},[s("q-autocomplete",{attrs:{"min-characters":0,debounce:700},on:{search:t.searchDetails,selected:t.selected}})],1):t._e(),t.getFinalActivity.dueDate?s("q-datetime",{attrs:{"stack-label":"Due Date"},model:{value:t.finalActivity.dueDate,callback:function(e){t.$set(t.finalActivity,"dueDate",e)},expression:"finalActivity.dueDate"}}):t._e()],1),s("q-btn",{attrs:{color:"secondary",icon:"navigate_next",label:"Confirm Activities"},on:{click:function(e){t.saveSeasonActivities()}}})],2)])}),h=[];l._withStripped=!0;var u=s("wdPS"),d=s("MjWO"),v=s("ta7f"),p={components:{"event-season-activities":d["default"]},props:{season:Object},validations:function(){return{totalAmount:{sameAsPassword:Object(v["sameAs"])(this.getTotal.toString())}}},created:function(){this.eventKey=this.$route.params.id,this.setPaymentsAmount()},watch:{getTotal:{handler:function(){this.isPaymentError=this.isSameTotal},deep:!0},workshops2:{handler:function(){console.log("working watch"),this.isHasEmptyWorkshops()},deep:!0},otherActivity2:{handler:function(){this.isHasOtherActivityEmpty()},deep:!0}},computed:{get3rdPayment:function(){try{for(var t=this.$store.getters["users/convertToDays"]({dateType:this.getPaymentCourseActivity.dayAfter.dateType,dateNumber:this.getPaymentCourseActivity.dayAfter.dateNumber}),e=new Array,s=0;s<this.numOfPayments;s++){if(0===s)var a={amount:this.payments.amount[s],classes:this.colorCode,startDate:this.$mathMixin.addDays(new Date(this.seasonStart),3),endDate:this.$mathMixin.addDays(new Date(this.seasonStart),3),eventKey:this.eventKey,id:"".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_payment(").concat(s+1,")"),title:"Batch(".concat(this.getBatchNumber,")_payment(").concat(s+1,")"),type:"payment"};else{a={amount:this.payments.amount[s],classes:this.colorCode,startDate:this.$mathMixin.addDays(new Date(this.paymentSched[s-1].startDate),t),endDate:this.$mathMixin.addDays(new Date(this.paymentSched[s-1].startDate),t),eventKey:this.eventKey,id:"".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_payment(").concat(s+1,")"),title:"Batch(".concat(this.getBatchNumber,")_payment(").concat(s+1,")"),type:"payment"};console.log("pay ni act",a)}a.startDate=a.endDate,a.startDate.setHours(0,0,0,0),a.endDate.setHours(0,0,0,0),e.push(a)}return console.log("paymentSched",e),e[2]}catch(t){return{}}},isSameTotal:function(){var t=parseFloat(this.totalAmount),e=parseFloat(this.getTotal);return t!==e?(this.isPaymentError=!0,!0):(this.isPaymentError=!1,!1)},isHasWorkshop:function(){try{for(var t=0;t<this.course.activities.length;t++)if("workshop"===this.course.activities[t].value)return!0;return!1}catch(t){return!0}},upcomingSundays2:function(){try{var t=this.paymentSched[this.paymentSched.length-1],e=this.$store.getters["startUp/getPlainValue"](t);return console.log("in sunday",e),this.$store.getters["startUp/getUpcomingSundays2"](new Date(e.startDate))}catch(t){return[]}},upcomingSundays:function(){try{return this.$store.getters["startUp/getUpcomingSundays"]}catch(t){return[]}},parseDetails:function(){return this.$store.getters["startUp/parseDetails"]},parseLocations:function(){return this.$store.getters["startUp/parseLocations2"]},course:function(){var t=this,e=this.$lodash.findIndex(this.$store.state.startUp.courses,function(e){return e[".key"]===t.courseKey});return this.$store.state.startUp.courses[e]},courseKey:function(){return this.$store.state.users.courseKey},numOfPayments:function(){return this.$store.state.users.numOfPayments},numOfWorkshops:function(){return this.$store.state.users.numOfWorkshops},seasonStart:function(){return this.$store.state.users.seasonStart},seasonEnd:function(){return this.$store.state.users.seasonEnd},totalAmount:function(){console.log("totalAmount",this.$store.state.users.totalAmount);var t=parseFloat(this.$store.state.users.totalAmount);return console.log("tofloat",t),this.$store.state.users.totalAmount},colorCode:function(){return this.$store.state.users.colorCode},event:function(){var t=this,e=this.$lodash.findIndex(this.$store.state.startUp.events,function(e){return e[".key"]===t.eventKey});return this.$store.state.startUp.events[e]},getLatestSeason:function(){try{return 0!=this.event.seasons.length?++this.event.seasons.length:1}catch(t){return 1}},getBatchNumber:function(){var t=this;try{var e=this.$lodash.filter(this.$store.state.startUp.schedules,function(e){return e.eventKey===t.eventKey});return 0!=e.length?++e.length:1}catch(t){return 1}},getOrientation:function(){try{var t=this.$lodash.findIndex(this.course.activities,function(t){return"orientation"===t.value});return this.course.activities[t]}catch(t){return[]}},getNumberOfPayments:function(){return this.numOfPayments},getPhotoshoot:function(){try{var t=this.$lodash.findIndex(this.course.activities,function(t){return"photoshoot"===t.value});return this.course.activities[t]}catch(t){return[]}},getPhotoliking:function(){try{var t=this.$lodash.findIndex(this.course.activities,function(t){return"photoliking"===t.value});return this.course.activities[t]}catch(t){return[]}},getPaymentCourseActivity:function(){try{var t=this.$lodash.findIndex(this.course.activities,function(t){return"payment"===t.value});return this.course.activities[t]}catch(t){return{}}},getPhotoshootCourseActivity:function(){var t=this.$lodash.findIndex(this.course.activities,function(t){return"photoshoot"===t.value});return this.course.activities[t]},getPhotolikingCourseActivity:function(){var t=this.$lodash.findIndex(this.course.activities,function(t){return"photoliking"===t.value});return this.course.activities[t]},getWorkshop:function(){try{var t=this.$lodash.findIndex(this.course.activities,function(t){return"workshop"===t.value});return this.course.activities[t]}catch(t){return[]}},otherActivities:function(){try{for(var t=[],e=c()(this.course.activities),s=0;s<e.length;s++)"orientation"!==e[s].value&&"payment"!==e[s].value&&"photoshoot"!==e[s].value&&"photoliking"!==e[s].value&&"workshop"!==e[s].value&&e[s].value!==this.getFinalActivity.value&&t.push(e[s]);for(var a=0;a<t.length;a++)this.otherActivity.value.push(t[a].value),this.otherActivity.label.push(t[a].label);return console.log("ote",t),this.otherActivities2=t,t}catch(t){return{}}},getFinalActivity:function(){try{var t=this.course.activities[this.course.activities.length-1];return t}catch(t){return{}}},getTotal:function(){try{var t=parseFloat(this.$lodash.sum(this.payments.amount));return t}catch(t){return 0}},getPaymentLastIndex:function(){try{return console.log("pay",this.paymentSched),this.$store.getters["startUp/getPlainValue"](this.paymentSched[this.paymentSched.length-1].startDate)}catch(t){return""}}},data:function(){return{isOtherActivityError:!0,isWorkshopError:!1,isPaymentError:!1,model:"",eventKey:"",paymentSched:[],orientation:{startDate:"",endDate:"",eventKey:"",id:"",title:"",type:"",classes:"",time:"Wed Oct 18 2017 08:00:00",location:"",details:"",dueDate:""},photoshoot:{startDate:"",endDate:"",eventKey:"",id:"",title:"",type:"",classes:"",time:"Wed Oct 18 2017 08:00:00",location:"",details:"",dueDate:""},photoliking:{startDate:"",endDate:"",eventKey:"",id:"",title:"",type:"",classes:"",time:"",location:"",details:"",dueDate:""},payments:{startDate:[],endDate:[],eventKey:[],id:[],title:"",type:[],classes:[],amount:[]},numberOfWorkshops:1,workshops:{startDate:[],endDate:[],eventKey:[],id:[],title:[],type:[],classes:[],date:[],time:[],location:[],details:[],dueDate:[]},workshops2:{startDate:[],endDate:[],eventKey:[],id:[],title:[],type:[],classes:[],time:[],location:[],details:[],dueDate:[]},otherActivities2:[],otherActivity:{startDate:[],endDate:[],eventKey:[],id:[],title:[],type:[],classes:[],label:[],value:[],time:[],location:[],details:[],dueDate:[]},otherActivity2:{startDate:[],endDate:[],eventKey:[],id:[],title:[],type:[],classes:[],label:[],value:[],time:[],location:[],details:[],dueDate:[]},finalActivity:{startDate:"",endDate:"",eventKey:"",id:"",title:"",type:"",classes:"",time:"Wed Oct 18 2017 08:00:00",location:"",details:"",dueDate:""}}},methods:{isHasOtherActivityEmpty:function(){for(var t=0;t<this.otherActivities.length;t++)if("undefined"===typeof this.otherActivity2.time[t])return this.isOtherActivityError=!0,!0;return this.isOtherActivityError=!1,!1},isHasEmptyWorkshops:function(){for(var t=0;t<this.numOfWorkshops;t++)if("undefined"===typeof this.workshops2.time[t])return this.isWorkshopError=!0,console.log("found empty in workshop"),!0;return console.log("not empty found in workshop"),this.isWorkshopError=!1,!1},alreadySelectedSunday:function(t){var e=this.$mathMixin.dayDiff(this.orientation.startDate,new Date(t)),s=this.$mathMixin.dayDiff(this.photoshoot.startDate,new Date(t)),a=(this.numOfPayments,this.$mathMixin.dayDiff(new Date(this.getPaymentLastIndex),new Date(t)));if(e<=0)return!1;if(s<=0)return!1;if(a<=0)return!1;for(var i=0;i<this.workshops.startDate.length;i++){var o=this.$mathMixin.dayDiff(new Date(this.workshops.startDate[i]),new Date(t));if(o<=0)return!1}return!0},hasNewWorkshop:function(t){return this.numberOfWorkshops>=1&&(0!==t||2!=this.numberOfWorkshops)},disableAddWorkshop:function(t){this.workshops.startDate.length;return"undefined"===typeof this.workshops.startDate[t]},selectUpcomingDate:function(t,e){this.workshops.startDate[t]=e,this.$forceUpdate()},selected:function(t){console.log("item selected",t)},searchDetails:function(t,e){var s=this;setTimeout(function(){e(Object(u["a"])(t,{field:"value",list:s.parseDetails}))},1e3)},searchLocation:function(t,e){var s=this;setTimeout(function(){e(Object(u["a"])(t,{field:"value",list:s.parseLocations}))},1e3)},removeWorkshop:function(t){try{console.log("remove i ",t),console.log("remove w",this.workshops.startDate[t]),"undefined"!==typeof this.workshops.startDate[t]&&this.workshops.startDate.splice(t,1),"undefined"!==typeof this.workshops.location[t]&&this.workshops.location.splice(t,1),"undefined"!==typeof this.workshops.details[t]&&this.workshops.details.splice(t,1)}catch(t){}this.numberOfWorkshops--},workshopMinDate:function(t){try{return t>=2?this.$mathMixin.addDays(new Date(this.workshops.startDate[this.workshops.startDate.length-2]),1).toString():this.$mathMixin.addDays(new Date(this.getPaymentLastIndex),4).toString()}catch(t){return this.$mathMixin.addDays(new Date(this.getPaymentLastIndex),4).toString()}},otherActivityMinDate:function(t,e){try{return e<=0?this.workshops.startDate.length<=0?this.$mathMixin.addDays(new Date(this.getPaymentLastIndex),1).toString():this.$mathMixin.addDays(new Date(this.workshops.startDate[this.workshops.startDate.length-1]),1).toString():this.$mathMixin.addDays(new Date(this.otherActivity.startDate[e-1]),1).toString()}catch(t){return this.$mathMixin.addDays(new Date(this.getPaymentLastIndex),1).toString()}},setActivityLabel:function(t){return t.label},setPaymentsAmount:function(){try{if(console.log("payments",this.numOfPayments),console.log("totalAmount",this.totalAmount),this.numOfPayments%2===0){var t=parseFloat(this.totalAmount.replace(/,/g,""))/parseInt(this.numOfPayments);console.log("each",parseInt(this.totalAmount)),console.log("each",parseInt(this.numOfPayments)),console.log("each",t),this.payments.amount=new Array(this.numOfPayments);for(var e=0;e<this.payments.amount.length;e++)this.payments.amount[e]=t}else{var s=.2*parseFloat(this.totalAmount.replace(/,/g,"")),a=(parseFloat(this.totalAmount.replace(/,/g,""))-s)/(parseInt(this.numOfPayments)-1);console.log("each",parseInt(this.totalAmount)),console.log("each",parseInt(this.numOfPayments)),console.log("first Payment",s),console.log("first Payment",a),this.payments.amount=new Array(this.numOfPayments),this.payments.amount[0]=s;for(e=1;e<this.payments.amount.length;e++)this.payments.amount[e]=a}console.log("it ends here"),this.generateSchedule()}catch(t){}},generateSchedule:function(){console.log("seasonstart",this.seasonStart),console.log("seasonend",this.seasonEnd),this.orientation.startDate=new Date(this.seasonStart),this.orientation.startDate.setHours(0,0,0,0),this.orientation.endDate=new Date(this.seasonStart),this.orientation.classes=this.colorCode,this.orientation.eventKey=this.eventKey,this.orientation.id="".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_orientation"),this.orientation.title="Batch(".concat(this.getBatchNumber,")_orientation"),this.orientation.type="orientation",console.log("orientation",this.orientation);for(var t=this.$store.getters["users/convertToDays"]({dateType:this.getPaymentCourseActivity.dayAfter.dateType,dateNumber:this.getPaymentCourseActivity.dayAfter.dateNumber}),e=0;e<this.numOfPayments;e++){if(0===e)var s={amount:this.payments.amount[e],classes:this.colorCode,startDate:this.$mathMixin.addDays(new Date(this.seasonStart),3),endDate:this.$mathMixin.addDays(new Date(this.seasonStart),3),eventKey:this.eventKey,id:"".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_payment(").concat(e+1,")"),title:"Batch(".concat(this.getBatchNumber,")_payment(").concat(e+1,")"),type:"payment"};else{s={amount:this.payments.amount[e],classes:this.colorCode,startDate:this.$mathMixin.addDays(new Date(this.paymentSched[e-1].startDate),t),endDate:this.$mathMixin.addDays(new Date(this.paymentSched[e-1].startDate),t),eventKey:this.eventKey,id:"".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_payment(").concat(e+1,")"),title:"Batch(".concat(this.getBatchNumber,")_payment(").concat(e+1,")"),type:"payment"};console.log("pay ni act",s)}s.startDate=s.endDate,s.startDate.setHours(0,0,0,0),s.endDate.setHours(0,0,0,0),this.paymentSched.push(s)}console.log("payment sched",this.paymentSched);var a=this.$store.getters["users/convertToDays"]({dateType:this.getPhotoshootCourseActivity.dayAfter.dateType,dateNumber:this.getPhotoshootCourseActivity.dayAfter.dateNumber});this.photoshoot.startDate=this.$mathMixin.addDays(new Date(this.paymentSched[0].startDate),a),this.photoshoot.endDate=this.$mathMixin.addDays(new Date(this.paymentSched[0].startDate),a),this.photoshoot.eventKey=this.eventKey,this.photoshoot.id="".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_photoshoot"),this.photoshoot.title="Batch(".concat(this.getBatchNumber,")_photoshoot"),this.photoshoot.type="photoshoot",this.photoshoot.classes=this.colorCode;var i=this.$store.getters["users/convertToDays"]({dateType:this.getPhotolikingCourseActivity.dayAfter.dateType,dateNumber:this.getPhotolikingCourseActivity.dayAfter.dateNumber});this.photoliking.startDate=this.$mathMixin.addDays(new Date(this.paymentSched[1].startDate),i),this.photoliking.endDate=this.$mathMixin.addDays(new Date(this.paymentSched[1].startDate),14),this.photoliking.eventKey=this.eventKey,this.photoliking.id="".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_photoliking"),this.photoliking.title="Batch(".concat(this.getBatchNumber,")_photoliking"),this.photoliking.type="photoliking",this.photoliking.classes=this.colorCode,this.photoliking.dueDate=this.photoliking.endDate,this.photoliking.startDate.setHours(0,0,0,0),this.photoliking.endDate.setHours(0,0,0,0),this.finalActivity.startDate=new Date(this.seasonEnd),this.finalActivity.endDate=new Date(this.seasonEnd),this.finalActivity.classes=this.colorCode,this.finalActivity.eventKey=this.eventKey,this.finalActivity.id="".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_").concat(this.getFinalActivity.value),this.finalActivity.title="Batch(".concat(this.getBatchNumber,")_").concat(this.getFinalActivity.value),this.finalActivity.type=this.getFinalActivity.value,this.finalActivity.startDate.setHours(0,0,0,0),console.log("done generating sched",this)},concatActivities:function(){var t=new Date(this.orientation.time).getHours(),e=new Date(this.orientation.time).getMinutes();this.orientation.startDate.setHours(t,e,0,0),this.orientation.endDate.setHours(t,e,0,0);var s=new Date(this.photoshoot.time).getHours(),a=new Date(this.photoshoot.time).getMinutes();this.photoshoot.startDate.setHours(s,a,0,0),this.photoshoot.endDate.setHours(s,a,0,0);var i=new Date(this.finalActivity.time).getHours(),o=new Date(this.finalActivity.time).getMinutes();this.finalActivity.startDate.setHours(i,o,0,0),this.finalActivity.endDate.setHours(i,o,0,0),console.log("other acts2",this.otherActivity);for(var n=[],r=0;r<this.otherActivities2.length;r++){var c={startDate:new Date(this.otherActivity.startDate[r]),endDate:"undefined"!==typeof this.otherActivity.dueDate[r]?new Date(this.otherActivity.dueDate[r]):new Date(this.otherActivity.startDate[r]),eventKey:this.eventKey,id:"".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_").concat(this.otherActivity.label[r]),title:"Batch(".concat(this.getBatchNumber,")_").concat(this.otherActivity.label[r]),classes:this.colorCode,time:this.otherActivity.time[r]?this.otherActivity.time[r]:"",location:this.otherActivity.location[r]?this.otherActivity.location[r]:"",details:this.otherActivity.details[r]?this.otherActivity.details[r]:"",dueDate:this.otherActivity.dueDate[r]?this.otherActivity.dueDate[r]:"",type:this.otherActivity.label[r]};if(console.log("time",c.time),c.startDate.setHours(0,0,0,0),"undefined"!==typeof c.time&&""!==c.time){var l=new Date(c.time).getHours(),h=new Date(c.time).getMinutes();c.startDate.setHours(l,h),c.endDate.setHours(l,h)}else c.endDate.setHours(0,0,0,0);n.push(c)}if(console.log("other",n),console.log("is has workshop",this.isHasWorkshop),this.isHasWorkshop){for(var u=[],d=0;d<this.numberOfWorkshops;d++){var v={startDate:new Date(this.workshops.startDate[d]),time:new Date(this.workshops.time[d]),eventKey:this.eventKey,id:"".concat(this.event.eventCode,"(").concat(this.getLatestSeason,")_batch(").concat(this.getBatchNumber,")_workshop(").concat(d+1,")"),title:"Batch(".concat(this.getBatchNumber,")_workshop(").concat(d+1,")"),classes:this.colorCode,dueDate:"",location:this.workshops.location[d]?this.workshops.location:"",details:this.workshops.details[d]?this.workshops.details[d]:"",type:"workshop"};v.startDate.setHours(0,0,0,0),v.endDate=v.startDate;var p=new Date(v.time).getHours(),m=new Date(v.time).getMinutes();v.endDate.setHours(p,m),u.push(v),console.log("wokseche",u)}var f=Array.prototype.concat(this.orientation,this.paymentSched,this.photoshoot,this.photoliking,u,n,this.finalActivity);console.log("concat",f),this.$store.state.users.newSeasonActivities=f}else{var y=Array.prototype.concat(this.orientation,this.paymentSched,this.photoshoot,this.photoliking,n,this.finalActivity);console.log("concat",y),this.$store.state.users.newSeasonActivities=y}},saveSeasonActivities:function(){var t=this;this.$forceUpdate();this.isHasEmptyWorkshops;console.log("test",this.isHasEmptyWorkshops),console.log("season isSameTotal",this.isSameTotal),console.log("season isWorkshopError",this.isHasEmptyWorkshops),console.log("season isOtherActivityError",this.isHasOtherActivityEmpty),this.isSameTotal?this.$q.notify("Please check fields"):(console.log("season props",this.season),this.$q.dialog({title:"Confirm Activities",message:"Confirm activities?",ok:"Yes",cancel:"No"}).then(function(){t.$store.state.users.newSeason=t.season,t.$store.state.users.isNewSeasonActivities=!0,t.concatActivities(),t.$router.push("/eventseason/".concat(t.$route.params.id,"/").concat(t.$store.state.users.newSeason.seasonNumber,"/seasonBatches"))}).catch(function(){}))},generateWorkshops:function(){var t=this,e=(new Date(this.get3rdPayment.startDate),this.$store.getters["startUp/getUpcomingWeekEnds"]({startDate:new Date(this.seasonStart),weekEnd:"sundays"})),s=new Array;this.$lodash.forEach(e,function(e){var a=t.$mathMixin.dayDiff(new Date(t.seasonStart),new Date(e));a>37&&s.push(e)});for(var a=0;a<this.numberOfWorkshops;a++)this.workshops.startDate[a]=new Date(s[a]),this.workshops.endDate[a]=new Date(s[a])},generateOtherActivities:function(){for(var t=this.$store.getters["startUp/getUpcomingWeekEnds2"]({startDate:new Date(this.seasonEnd),weekEnd:"sundays"}),e=new Array,s=0;s<t.length;s++){var a=this.$mathMixin.dayDiff(new Date(this.seasonEnd),new Date(t[s]));if(console.log("dif",a),0===a){s=t.length;break}e.push(t[s])}for(var i=this.$lodash.takeRight(e,this.otherActivities.length),o=0;o<this.otherActivities.length;o++)this.otherActivity2.startDate[o]=i[o]},test:function(){var t=this;console.log("otherActivities",this.otherActivities),console.log("payments",this.payments),console.log("upcomingSundays2",this.upcomingSundays2),console.log("finalevent",this.finalActivity);var e=new Array;this.$lodash.forEach(this.upcomingSundays2,function(s){var a=t.$mathMixin.dayDiff(new Date(s),t.finalActivity.startDate);console.log("dif",a),a>0&&e.push(s)});var s=this.$lodash.dropRight(e,this.otherActivities.length);console.log("droppedDates",s)}}},m=p,f=s("KHd+"),y=Object(f["a"])(m,l,h,!1,null,null,null),g=y.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex row inline justify-center"},[s("q-btn",{attrs:{label:"test"},on:{click:t.test}}),s("div",[s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"350px"},attrs:{inline:""}},[s("q-card-title",[s("p",{staticClass:"q-title text-weight-bold"},[t._v("Orientation")])]),s("q-card-main",[s("q-field",{attrs:{orientation:"vertical","label-width":"2",icon:"date_range"}},[s("div",[s("q-datetime",{attrs:{disable:"",format:"ddd MMM D, YYYY",readonly:"",type:"date","stack-label":"Date"},model:{value:t.orientation.startDate,callback:function(e){t.$set(t.orientation,"startDate",e)},expression:"orientation.startDate"}}),s("q-datetime",{attrs:{format:"h:mm A",type:"time","stack-label":"Time"},model:{value:t.orientation.time,callback:function(e){t.$set(t.orientation,"time",e)},expression:"orientation.time"}})],1)])],1),s("q-card-separator",{attrs:{inset:""}}),s("q-card-main",[s("q-field",{attrs:{icon:"description"}},["new location"===t.selectOrientationLocation?s("div",{staticClass:"q-my-md flex row"},[s("q-input",{staticClass:"col-md-8",attrs:{"float-label":"Name"},model:{value:t.newOrientNameLocation,callback:function(e){t.newOrientNameLocation=e},expression:"newOrientNameLocation"}}),s("div",{staticClass:"q-mt-md"},[s("q-btn-group",{attrs:{rounded:""}},[s("q-btn",{attrs:{size:"sm",color:"positive",label:"Save"},on:{click:function(e){t.saveOrientLocation()}}}),s("q-btn",{attrs:{size:"sm",color:"negative",label:"Cancel"},on:{click:function(e){t.selectOrientationLocation=""}}})],1)],1)],1):s("q-select",{attrs:{separator:"","float-label":"Select Location",filter:"",options:t.locationTemplateOpt},on:{input:t.onChangeOrientLocation},model:{value:t.selectOrientationLocation,callback:function(e){t.selectOrientationLocation=e},expression:"selectOrientationLocation"}}),s("q-input",{attrs:{readonly:""===t.selectOrientationLocation,type:"textarea","float-label":"Location","max-height":80,rows:"5"},model:{value:t.orientation.location,callback:function(e){t.$set(t.orientation,"location",e)},expression:"orientation.location"}}),s("q-input",{attrs:{readonly:""===t.selectOrientationLocation,type:"textarea","float-label":"Details (optional)","max-height":80,rows:"5"},model:{value:t.orientation.details,callback:function(e){t.$set(t.orientation,"details",e)},expression:"orientation.details"}})],1)],1)],1)],1),s("div",[s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"400px"},attrs:{inline:""}},[s("q-card-title",[s("p",{staticClass:"q-title text-weight-bold"},[t._v("Payment")])]),s("q-card-main",[s("q-field",{staticClass:"q-my-md",attrs:{orientation:"vertical",icon:"attach_money",label:"Payment Amount",error:t.isSameTotal,"error-label":"Please check Total Amount"}},[s("p",{staticClass:"caption"},[s("b",[t._v("Season Rate:")]),t._v(" P "+t._s(t.totalAmount))]),t._l(t.numberOfPayments,function(e,a){return s("div",{key:e,staticClass:"row inline flex"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t.paymentsPickDateChecked[a]?s("q-datetime",{attrs:{min:t.paymentsMinDate(a),max:t.paymentsMaxDate,format:"ddd MMM D, YYYY","stack-label":"Date",type:"date"},model:{value:t.payments.startDate[a],callback:function(e){t.$set(t.payments.startDate,a,e)},expression:"payments.startDate[i]"}}):s("q-select",{attrs:{"stack-label":"Payment "+(a+1)+" Date",filter:"",options:t.paymentsOpt(a)},model:{value:t.payments.startDate[a],callback:function(e){t.$set(t.payments.startDate,a,e)},expression:"payments.startDate[i]"}})],1),s("q-checkbox",{staticClass:"col-2",attrs:{"checked-icon":"calendar_today","unchecked-icon":"calendar_today"},model:{value:t.paymentsPickDateChecked[a],callback:function(e){t.$set(t.paymentsPickDateChecked,a,e)},expression:"paymentsPickDateChecked[i]"}}),s("q-input",{staticClass:"col-3 q-mb-md",attrs:{prefix:"P ","stack-label":"Amount",type:"number"},model:{value:t.paymentsAmount[a],callback:function(e){t.$set(t.paymentsAmount,a,e)},expression:"paymentsAmount[i]"}})],1)])}),s("q-item-separator"),t.missingAmount<0?s("span",{staticClass:"text-weight-bold "},[t._v("Missing Amount: "+t._s(t._f("currency")(Math.abs(t.missingAmount))))]):t._e(),s("br"),s("span",{staticClass:"text-weight-bold"},[t._v("Total: "+t._s(t._f("currency")(t.getTotal)))])],2)],1)],1)],1),t.hasPhotoshoot?s("div",[s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"350px"},attrs:{inline:""}},[s("q-card-title",[s("p",{staticClass:"q-title text-weight-bold"},[t._v("Photoshoot")])]),s("q-card-main",[s("q-field",{attrs:{orientation:"vertical","label-width":"2",icon:"date_range"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t.photoshootPickDateChecked||t.getPhotoshootActivity.datePick?s("q-datetime",{attrs:{min:t.photoshootMinDate,max:t.photoshootMaxDate,format:"ddd MMM D, YYYY",type:"date","stack-label":"Date"},model:{value:t.photoshoot.startDate,callback:function(e){t.$set(t.photoshoot,"startDate",e)},expression:"photoshoot.startDate"}}):s("q-select",{attrs:{"stack-label":"Select Date",filter:"",options:t.photoshootOpt},model:{value:t.photoshoot.startDate,callback:function(e){t.$set(t.photoshoot,"startDate",e)},expression:"photoshoot.startDate"}})],1),t.getPhotoshootActivity.datePick?t._e():s("q-checkbox",{staticClass:"col-2",attrs:{"checked-icon":"calendar_today","unchecked-icon":"calendar_today"},on:{input:function(t){}},model:{value:t.photoshootPickDateChecked,callback:function(e){t.photoshootPickDateChecked=e},expression:"photoshootPickDateChecked"}})],1),s("q-datetime",{attrs:{format:"h:mm A",type:"time","stack-label":"Time"},model:{value:t.photoshoot.time,callback:function(e){t.$set(t.photoshoot,"time",e)},expression:"photoshoot.time"}})],1)],1),s("q-card-separator",{attrs:{inset:""}}),s("q-card-main",[s("q-field",{attrs:{icon:"description"}},["new location"===t.selectPhotoshootLocation?s("div",{staticClass:"q-my-md flex row"},[s("q-input",{staticClass:"col-md-8",attrs:{"float-label":"Name"},model:{value:t.newPhotoshootNameLocation,callback:function(e){t.newPhotoshootNameLocation=e},expression:"newPhotoshootNameLocation"}}),s("div",{staticClass:"q-mt-md"},[s("q-btn-group",{attrs:{rounded:""}},[s("q-btn",{attrs:{size:"sm",color:"positive",label:"Save"},on:{click:function(e){t.savePhotoshootLocation()}}}),s("q-btn",{attrs:{size:"sm",color:"negative",label:"Cancel"},on:{click:function(e){t.selectPhotoshootLocation=""}}})],1)],1)],1):s("q-select",{attrs:{"float-label":"Select Location",filter:"",options:t.locationTemplateOpt},on:{input:t.onChangePhotoLocation},model:{value:t.selectPhotoshootLocation,callback:function(e){t.selectPhotoshootLocation=e},expression:"selectPhotoshootLocation"}}),s("q-input",{attrs:{readonly:""===t.selectPhotoshootLocation,type:"textarea","float-label":"Location","max-height":80,rows:"5"},model:{value:t.photoshoot.location,callback:function(e){t.$set(t.photoshoot,"location",e)},expression:"photoshoot.location"}}),s("q-input",{attrs:{readonly:""===t.selectPhotoshootLocation,type:"textarea","float-label":"Details","max-height":80,rows:"5"},model:{value:t.photoshoot.details,callback:function(e){t.$set(t.photoshoot,"details",e)},expression:"photoshoot.details"}})],1)],1)],1)],1):t._e(),t.hasPhotoliking?s("div",[s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"350px"},attrs:{inline:""}},[s("q-card-title",[s("p",{staticClass:"q-title text-weight-bold"},[t._v("Photoliking")])]),s("q-card-main",[s("q-field",{attrs:{orientation:"vertical","label-width":"2",icon:"date_range"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t.photolikingPickDateChecked||t.getPhotolikingActivity.datePick?s("q-datetime",{attrs:{min:t.photolikingMinDate,max:t.photolikingMaxDate,format:"ddd MMM D, YYYY",type:"date","stack-label":"Start Date"},on:{input:t.onChangePhotolikingStartDate},model:{value:t.photoliking.startDate,callback:function(e){t.$set(t.photoliking,"startDate",e)},expression:"photoliking.startDate"}}):s("q-select",{attrs:{"stack-label":"Start Date",filter:"",options:t.photolikingOpt},on:{input:t.onChangePhotolikingStartDate},model:{value:t.photoliking.startDate,callback:function(e){t.$set(t.photoliking,"startDate",e)},expression:"photoliking.startDate"}})],1),t.getPhotolikingActivity.datePick?t._e():s("q-checkbox",{staticClass:"col-2",attrs:{"checked-icon":"calendar_today","unchecked-icon":"calendar_today"},on:{input:function(t){}},model:{value:t.photolikingPickDateChecked,callback:function(e){t.photolikingPickDateChecked=e},expression:"photolikingPickDateChecked"}})],1),s("div",[s("q-datetime",{attrs:{min:t.photolikingMinEndDate,max:t.photolikindMaxEndDate,format:"ddd MMM D, YYYY",type:"date","stack-label":"End Date"},model:{value:t.photoliking.endDate,callback:function(e){t.$set(t.photoliking,"endDate",e)},expression:"photoliking.endDate"}})],1)])],1)],1)],1):t._e(),t.hasWorkshops?s("div",[s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"950px"},attrs:{inline:""}},[s("q-card-title",[s("p",{staticClass:"q-title text-weight-bold"},[t._v("Workshops")])]),s("q-card-main",t._l(t.numberOfWorkshops,function(e,a){return s("div",{key:a,staticClass:"row inline flex"},[s("div",{staticClass:"q-ma-md"},[s("q-field",{attrs:{label:"Workshop "+(a+1),"label-width":"3",orientation:"vertical"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[t.getWorkshopActivity.datePick||t.workshopPickDateChecked[a]?s("q-datetime",{attrs:{disable:t.isFirstWorkshopIsNull(a),min:t.workshopsMinDate(a),max:t.workshopsMaxDate,format:"ddd MMM D, YYYY","stack-label":"Date",type:"date"},model:{value:t.workshops.startDate[a],callback:function(e){t.$set(t.workshops.startDate,a,e)},expression:"workshops.startDate[i]"}}):s("q-select",{attrs:{disable:t.isFirstWorkshopIsNull(a),"stack-label":"Select Date",filter:"",options:t.workshopOpt(a)},on:{input:function(e){t.onChangeFirstWorkshopDate(a)}},model:{value:t.workshops.startDate[a],callback:function(e){t.$set(t.workshops.startDate,a,e)},expression:"workshops.startDate[i]"}})],1),s("q-checkbox",{staticClass:"col-1 q-mt-md",attrs:{disable:t.isFirstWorkshopIsNull(a),"checked-icon":"calendar_today","unchecked-icon":"calendar_today"},on:{input:function(e){t.workshops.startDate[a]=""}},model:{value:t.workshopPickDateChecked[a],callback:function(e){t.$set(t.workshopPickDateChecked,a,e)},expression:"workshopPickDateChecked[i]"}})],1),s("q-datetime",{attrs:{format:"h:mm A","stack-label":"Time",type:"time"},model:{value:t.workshops.time[a],callback:function(e){t.$set(t.workshops.time,a,e)},expression:"workshops.time[i]"}}),s("q-item-separator"),"new location"===t.selectWorkshopLocation[a]?s("div",{staticClass:"q-my-md flex row"},[s("q-input",{staticClass:"col-md-8",attrs:{"float-label":"Name"},model:{value:t.newWorkshopNameLocation[a],callback:function(e){t.$set(t.newWorkshopNameLocation,a,e)},expression:"newWorkshopNameLocation[i]"}}),s("div",{staticClass:"q-mt-md"},[s("q-btn-group",{attrs:{rounded:""}},[s("q-btn",{attrs:{size:"sm",color:"positive",label:"Save"},on:{click:function(e){t.saveWorkshopLocation(a)}}}),s("q-btn",{attrs:{size:"sm",color:"negative",label:"Cancel"},on:{click:function(e){t.clearWorkshopSelectLocation(a)}}})],1)],1)],1):s("q-select",{attrs:{"float-label":"Select Location",filter:"",options:t.locationTemplateOpt},on:{input:function(e){t.onChangeWorkshopLocation(a)}},model:{value:t.selectWorkshopLocation[a],callback:function(e){t.$set(t.selectWorkshopLocation,a,e)},expression:"selectWorkshopLocation[i]"}}),s("q-input",{attrs:{readonly:""===t.selectWorkshopLocation[a],type:"textarea","float-label":"Location","max-height":50,rows:"4"},model:{value:t.workshops.location[a],callback:function(e){t.$set(t.workshops.location,a,e)},expression:"workshops.location[i]"}}),s("q-input",{attrs:{readonly:""===t.selectWorkshopLocation[a],type:"textarea","float-label":"Description","max-height":50,rows:"4"},model:{value:t.workshops.details[a],callback:function(e){t.$set(t.workshops.details,a,e)},expression:"workshops.details[i]"}})],1)],1)])}))],1)],1):t._e(),t._l(t.getOtherActivity,function(e,a){return s("div",{key:a},[s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"350px"},attrs:{inline:""}},[s("q-card-title",[s("p",{staticClass:"q-title text-weight-bold"},[t._v(t._s(e.label))])]),s("q-card-main",[s("q-field",{attrs:{"label-width":"2",icon:"date_range"}},["detailed"===e.actType?s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[!1!==e.datePick||t.otherActivitiesPickDateChecked[a]?s("q-datetime",{attrs:{min:t.otherActivityMinStartDate(e,a),max:t.otherActivityMaxStartDate(e,a),"stack-label":"Date",format:"ddd MMM D, YYYY",type:"date"},model:{value:t.otherActivities.startDate[a],callback:function(e){t.$set(t.otherActivities.startDate,a,e)},expression:"otherActivities.startDate[i]"}}):s("q-select",{attrs:{"stack-label":"Select Date",filter:"",options:t.otherActivityOpt(e,a)},model:{value:t.otherActivities.startDate[a],callback:function(e){t.$set(t.otherActivities.startDate,a,e)},expression:"otherActivities.startDate[i]"}})],1),s("q-checkbox",{staticClass:"col-1 q-mt-md",attrs:{"checked-icon":"calendar_today","unchecked-icon":"calendar_today"},on:{input:function(e){t.otherActivities.startDate[a]=""}},model:{value:t.otherActivitiesPickDateChecked[a],callback:function(e){t.$set(t.otherActivitiesPickDateChecked,a,e)},expression:"otherActivitiesPickDateChecked[i]"}})],1),s("q-datetime",{attrs:{"stack-label":"Time",format:"h:mm A",type:"time"},model:{value:t.otherActivities.time[a],callback:function(e){t.$set(t.otherActivities.time,a,e)},expression:"otherActivities.time[i]"}})],1):s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[!1!==e.datePick||t.otherActivitiesPickDateChecked[a]?s("q-datetime",{attrs:{min:t.otherActivityMinStartDate(e,a),max:t.otherActivityMaxStartDate(e,a),"stack-label":"Start Date",format:"ddd MMM D, YYYY",type:"date"},on:{input:function(s){t.onChangeOtherActivityDateRange(e,a)}},model:{value:t.otherActivities.startDate[a],callback:function(e){t.$set(t.otherActivities.startDate,a,e)},expression:"otherActivities.startDate[i]"}}):s("q-select",{attrs:{"stack-label":"Select Date",filter:"",options:t.otherActivityOpt(e)},on:{input:function(s){t.onChangeOtherActivityDateRange(e,a)}},model:{value:t.otherActivities.startDate[a],callback:function(e){t.$set(t.otherActivities.startDate,a,e)},expression:"otherActivities.startDate[i]"}})],1),s("q-checkbox",{staticClass:"col-1 q-mt-md",attrs:{"checked-icon":"calendar_today","unchecked-icon":"calendar_today"},on:{input:function(e){t.otherActivities.startDate[a]="",t.otherActivities.endDate[a]=""}},model:{value:t.otherActivitiesPickDateChecked[a],callback:function(e){t.$set(t.otherActivitiesPickDateChecked,a,e)},expression:"otherActivitiesPickDateChecked[i]"}})],1),s("q-datetime",{attrs:{disable:t.isOtherActivityDateEndNull(e,a),min:t.otherActivityMinEndDate(e,a),max:t.otherActivityMaxEndDate(e,a),"stack-label":"End Date",format:"ddd MMM D, YYYY",type:"date"},model:{value:t.otherActivities.endDate[a],callback:function(e){t.$set(t.otherActivities.endDate,a,e)},expression:"otherActivities.endDate[i]"}})],1)])],1),s("q-card-separator",{attrs:{inset:""}}),"detailed"===e.actType?s("q-card-main",[s("q-field",{attrs:{icon:"description"}},["new location"===t.selectOtherActivityLocation[a]?s("div",{staticClass:"q-my-md flex row"},[s("q-input",{staticClass:"col-md-8",attrs:{"float-label":"Name"},model:{value:t.newOtherActivityLocation[a],callback:function(e){t.$set(t.newOtherActivityLocation,a,e)},expression:"newOtherActivityLocation[i]"}}),s("div",{staticClass:"q-mt-md"},[s("q-btn-group",{attrs:{rounded:""}},[s("q-btn",{attrs:{size:"sm",color:"positive",label:"Save"},on:{click:function(e){t.saveOtherActivityLocation(a)}}}),s("q-btn",{attrs:{size:"sm",color:"negative",label:"Cancel"},on:{click:function(e){t.clearOtherActivitySelectLocation(a)}}})],1)],1)],1):s("q-select",{attrs:{separator:"","float-label":"Select Location",filter:"",options:t.locationTemplateOpt},on:{input:function(e){t.onChangeOtherActivityLocation(a)}},model:{value:t.selectOtherActivityLocation[a],callback:function(e){t.$set(t.selectOtherActivityLocation,a,e)},expression:"selectOtherActivityLocation[i]"}}),s("q-input",{attrs:{readonly:""===t.selectOtherActivityLocation,type:"textarea","float-label":"Location","max-height":80,rows:"5"},model:{value:t.otherActivities.location[a],callback:function(e){t.$set(t.otherActivities.location,a,e)},expression:"otherActivities.location[i]"}}),s("q-input",{attrs:{readonly:""===t.selectOtherActivityLocation[a],type:"textarea","float-label":"Details (optional)","max-height":80,rows:"5"},model:{value:t.otherActivities.details[a],callback:function(e){t.$set(t.otherActivities.details,a,e)},expression:"otherActivities.details[i]"}})],1)],1):t._e()],1)],1)}),s("div",[s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"350px"},attrs:{inline:""}},[s("q-card-title",[s("p",{staticClass:"q-title text-weight-bold"},[t._v("Final Event")])]),s("q-card-main",[s("q-field",{attrs:{"label-width":"2",label:"Date",icon:"date_range"}},[s("q-datetime",{attrs:{disable:"",format:"ddd MMM D, YYYY",type:"date"},model:{value:t.finalEvent.startDate,callback:function(e){t.$set(t.finalEvent,"startDate",e)},expression:"finalEvent.startDate"}}),s("q-datetime",{attrs:{format:"h:mm A",type:"time"},model:{value:t.finalEvent.time,callback:function(e){t.$set(t.finalEvent,"time",e)},expression:"finalEvent.time"}})],1)],1),s("q-card-separator",{attrs:{inset:""}}),s("q-card-main",[s("q-field",{attrs:{icon:"description"}},["new location"===t.selectFinalEventLocation?s("div",{staticClass:"q-my-md flex row"},[s("q-input",{staticClass:"col-md-8",attrs:{"float-label":"Name"},model:{value:t.newFinalEventLocation,callback:function(e){t.newFinalEventLocation=e},expression:"newFinalEventLocation"}}),s("div",{staticClass:"q-mt-md"},[s("q-btn-group",{attrs:{rounded:""}},[s("q-btn",{attrs:{size:"sm",color:"positive",label:"Save"},on:{click:function(e){t.saveFinalEventLocation()}}}),s("q-btn",{attrs:{size:"sm",color:"negative",label:"Cancel"},on:{click:function(e){t.selectFinalEventLocation=""}}})],1)],1)],1):s("q-select",{attrs:{separator:"","float-label":"Select Location",filter:"",options:t.locationTemplateOpt},on:{input:t.onChangeFinalEventLocation},model:{value:t.selectFinalEventLocation,callback:function(e){t.selectFinalEventLocation=e},expression:"selectFinalEventLocation"}}),s("q-input",{attrs:{readonly:""===t.selectFinalEventLocation,type:"textarea","float-label":"Location","max-height":80,rows:"5"},model:{value:t.finalEvent.location,callback:function(e){t.$set(t.finalEvent,"location",e)},expression:"finalEvent.location"}}),s("q-input",{attrs:{readonly:""===t.selectFinalEventLocation,type:"textarea","float-label":"Details (optional)","max-height":80,rows:"5"},model:{value:t.finalEvent.details,callback:function(e){t.$set(t.finalEvent,"details",e)},expression:"finalEvent.details"}})],1)],1)],1)],1)],2)},D=[];k._withStripped=!0;s("f3/d"),s("xfY5");var b=s("9JDm"),A={props:{seasonStart:{type:String,default:""},seasonEnd:{type:String,default:""},latestSeason:{type:Number,default:0},courseKey:{type:String,default:""},eventKey:{type:String,default:""},eventCode:{type:String,default:""},seasonNumber:{type:Number,default:1},classes:{type:String,default:""},totalAmount:{type:Number,default:0},numberOfPayments:{type:Number,default:0},batchCapacity:{type:Number,default:0},isRestoreAsDraft:{type:Boolean,default:!1}},firebase:function(){return{courses:this.$database.ref("settings/courses"),locationTemplates:this.$database.ref("locationTemplates")}},created:function(){if(this.isRestoreAsDraft)return this.seasonStart!==this.tempSeasonDraft.seasonStart&&this.seasonEnd!==this.tempSeasonDraft.seasonEnd&&this.onChangeStartDateOrEndDate(),void(this.totalAmount!==this.tempSeasonDraft.totalAmount&&this.setPaymentsAmount());this.commitStoreStates(),this.setPaymentsAmount(),this.setPaymentsToNull(),this.hasWorkshops&&("undefined"===typeof this.workshops.startDate[0]&&this.setWorkshopsToNull(),"undefined"===typeof this.otherActivities.startDate[0]&&this.setOtherActivitiesToNull()),this.generatePaymentsDate(),(this.hasPhotoshoot||""===this.photoshoot.startDate)&&this.generatePhotoshootActivity(),(this.hasPhotoliking||""===this.photoliking.startDate)&&this.generatePhotolikingActivity()},computed:{tempSeasonDraft:function(){return this.$store.state.schedules.tempSeasonDraft},photolikingOpt:function(){var t=this;if(!1===this.getPhotolikingActivity.datePick){for(var e=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,this.getPhotolikingActivity.dayOfWeek),s=0,a=0;a<e.length;a++){var i=b["d"].getDateDiff(e[a],this.payments.startDate[1]);i<=0&&s++}var o=this.$lodash.dropRight(this.$lodash.drop(e,s));return this.$lodash.map(o,function(e){return{label:t.$store.getters["schedules/formatDate"](e),value:e}})}return[]},photoshootOpt:function(){var t=this,e=this.$lodash.filter(this.getCourse.activities,function(t){return"photoshoot"===t.value||"photoshoots"===t.value})[0];if(!1===e.datePick){for(var s=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,e.dayOfWeek),a=0,i=0;i<s.length;i++){var o=b["d"].getDateDiff(s[i],this.payments.startDate[0]);o<=0&&a++}var n=this.$lodash.dropRight(this.$lodash.drop(s,a));return this.$lodash.map(n,function(e){return{label:t.$store.getters["schedules/formatDate"](e),value:e}})}return[]},numberOfWorkshops:{get:function(){return this.$store.state.schedules.numberOfWorkshops},set:function(t){this.$store.state.schedules.numberOfWorkshops=t}},finalEvent:{get:function(){return this.$store.state.schedules.finalEvent},set:function(t){this.$store.state.schedules.finalEvent=t}},otherActivities:{get:function(){return this.$store.state.schedules.otherActivities},set:function(t){this.$store.state.schedules.otherActivities=t}},workshops:{get:function(){return this.$store.state.schedules.workshops},set:function(t){this.$store.state.schedules.workshops=t}},photoliking:{get:function(){return this.$store.state.schedules.photoliking},set:function(t){this.$store.state.schedules.photoliking=t}},photoshoot:{get:function(){return this.$store.state.schedules.photoshoot},set:function(t){this.$store.state.schedules.photoshoot=t}},payments:{get:function(){return this.$store.state.schedules.payments},set:function(t){this.$store.state.schedules.payments=t}},paymentsAmount:{get:function(){return this.$store.state.schedules.paymentsAmount},set:function(t){this.$store.state.schedules.paymentsAmount=t}},selectOrientationLocation:{get:function(){return this.$store.state.schedules.selectOrientationLocation},set:function(t){this.$store.state.schedules.selectOrientationLocation=t}},selectPhotoshootLocation:{get:function(){return this.$store.state.schedules.selectPhotoshootLocation},set:function(t){this.$store.state.schedules.selectPhotoshootLocation=t}},selectWorkshopLocation:{get:function(){return this.$store.state.schedules.selectWorkshopLocation},set:function(t){this.$store.state.schedules.selectWorkshopLocation=t}},selectOtherActivityLocation:{get:function(){return this.$store.state.schedules.selectOtherActivityLocation},set:function(t){this.$store.state.schedules.selectOtherActivityLocation=t}},selectFinalEventLocation:{get:function(){return this.$store.state.schedules.selectFinalEventLocation},set:function(t){this.$store.state.schedules.selectFinalEventLocation=t}},photolikingPickDateChecked:{get:function(){return this.$store.state.schedules.photolikingPickDateChecked},set:function(t){this.$store.state.schedules.photolikingPickDateChecked=t}},photoshootPickDateChecked:{get:function(){return this.$store.state.schedules.photoshootPickDateChecked},set:function(t){this.$store.state.schedules.photoshootPickDateChecked=t}},paymentsPickDateChecked:{get:function(){return this.$store.state.schedules.paymentsPickDateChecked},set:function(t){this.$store.state.schedules.paymentsPickDateChecked=t}},workshopPickDateChecked:{get:function(){return this.$store.state.schedules.workshopPickDateChecked},set:function(t){this.$store.state.schedules.workshopPickDateChecked=t}},otherActivitiesPickDateChecked:{get:function(){return this.$store.state.schedules.otherActivitiesPickDateChecked},set:function(t){this.$store.state.schedules.otherActivitiesPickDateChecked=t}},orientation:{get:function(){return this.$store.state.schedules.orientation},set:function(t){this.$store.state.schedules.orientation=t}},plottedActivities:{get:function(){return this.$store.state.schedules.plottedActivities},set:function(t){this.$store.state.schedules.plottedActivities=t}},hasWorkshops:function(){return!!this.getWorkshopActivity},hasPhotoliking:function(){return!!this.getPhotolikingActivity},hasPhotoshoot:function(){return!!this.getPhotoshootActivity},paymentsMaxDate:function(){return b["d"].subtractFromDate(new Date(this.seasonEnd),{days:14})},photolikindMaxEndDate:function(){return b["d"].subtractFromDate(new Date(this.seasonEnd),{days:7})},photolikingMinEndDate:function(){return b["d"].addToDate(new Date(this.photoliking.startDate),{days:1})},photolikingMinDate:function(){return b["d"].addToDate(new Date(this.payments.startDate[1]),{days:1})},photolikingMaxDate:function(){return b["d"].subtractFromDate(new Date(this.seasonEnd),{days:7})},photoshootMinDate:function(){return b["d"].addToDate(new Date(this.payments.startDate[0]),{days:1})},photoshootMaxDate:function(){return b["d"].subtractFromDate(new Date(this.seasonEnd),{days:14})},workshopsMaxDate:function(){return b["d"].subtractFromDate(new Date(this.seasonEnd),{days:7})},locationTemplateOpt:function(){var t=new Array;return t=this.$lodash.map(this.locationTemplates,function(t){return{label:t.name,value:t[".key"]}}),t.push({label:"New Location",value:"new location",icon:"add"}),t},getEvent:function(){var t=this,e=this.$lodash.findIndex(this.$store.state.startUp.events,function(e){return e[".key"]===t.eventKey});return this.$store.state.startUp.events[e]},getOtherActivity:function(){return this.$lodash.remove(this.getCourse.activities,function(t){return"payments"!=t.value&&"orientation"!=t.value&&"photoshoots"!=t.value&&"photoshoot"!=t.value&&"photoliking"!=t.value&&"workshop"!=t.value&&"workshops"!=t.value&&"final event"!=t.value})},getWorkshopActivity:function(){return this.$lodash.filter(this.getCourse.activities,function(t){return"workshops"===t.value||"workshop"===t.value})[0]},getPhotolikingActivity:function(){return this.$lodash.filter(this.getCourse.activities,function(t){return"photoliking"===t.value})[0]},getPhotoshootActivity:function(){return this.$lodash.filter(this.getCourse.activities,function(t){return"photoshoot"===t.value||"photoshoots"===t.value})[0]},getTotal:function(){try{var t=parseFloat(this.$lodash.sum(this.paymentsAmount));return t}catch(t){return 0}},isSameTotal:function(){var t=parseFloat(this.totalAmount),e=parseFloat(this.getTotal);return t!==e?(this.isPaymentError=!0,!0):(this.isPaymentError=!1,!1)},missingAmount:function(){var t=parseFloat(this.totalAmount);parseFloat(this.getTotal);return this.getTotal-t},getCourse:function(){var t=this;return this.$lodash.filter(this.courses,function(e){return e[".key"]===t.courseKey})[0]}},data:function(){return{newFinalEventLocation:"",newOtherActivityLocation:[],newWorkshopNameLocation:[],newPhotoshootNameLocation:"",newOrientNameLocation:"",course:[],isPaymentError:!1,mon:new Array,tue:new Array,wed:new Array,thu:new Array,fri:new Array,sat:new Array,sun:new Array}},methods:{onChangeFirstWorkshopDate:function(t){if(t<1){console.log(t,"index");var e=this.workshops.startDate[0]?this.workshops.startDate[0]:this.photoshoot.startDate,s=this.$store.getters["schedules/getDatesOfWeek"]({seasonStart:e,seasonEnd:this.seasonEnd,daysofweek:this.getWorkshopActivity.dayOfWeek});if(console.log(s,"dates"),this.numberOfWorkshops>1)for(var a=0;a<this.numberOfWorkshops;a++)"undefined"!==typeof s[a]&&(this.workshops.startDate[a+1]=s[a]);console.log(this.workshops,"workshops")}},getOtherActivityDatesUsed:function(t,e){if(!1!==t.datePick&&"date range"!==t.actType){for(var s=[],a=this.otherActivities.startDate,i=0;i<this.otherActivities.startDate.length;i++)i!==e&&s.push(a[i]);return s}return[]},onChangeStartDateOrEndDate:function(){if(this.orientation.startDate=this.seasonStart,this.orientation.endDate=this.seasonStart,this.finalEvent.startDate=this.seasonEnd,this.finalEvent.endDate=this.seasonEnd,this.generatePaymentsDate(),this.photoshoot.startDate="",this.photoshoot.endDate="",this.generatePhotoshootActivity(),this.photoliking.startDate="",this.photoliking.endDate="",this.generatePhotolikingActivity(),this.hasWorkshops)for(var t=0;t<this.numberOfWorkshops;t++)this.workshopPickDateChecked[t]=!1,this.workshops.startDate[t]="",this.workshops.actType[t]=this.getWorkshopActivity.actType;for(t=0;t<this.getOtherActivity.length;t++)this.otherActivitiesPickDateChecked[t]=!1,this.otherActivities.startDate[t]="",this.otherActivities.endDate[t]="",this.otherActivities.time[t]="";this.finalEvent.startDate=this.seasonEnd},commitStoreStates:function(){this.$store.commit("schedules/commitActivityComponentState",{seasonStart:this.seasonStart,seasonEnd:this.seasonEnd,eventKey:this.eventKey,eventCode:this.eventCode,seasonNumber:this.seasonNumber,classes:this.classes})},isOtherActivityDateEndNull:function(t,e){return"date range"===t.actType&&null===this.otherActivities.startDate[e]},otherActivityMaxStartDate:function(t,e){return t.actType,b["d"].subtractFromDate(new Date(this.seasonEnd),{days:6})},otherActivityMinStartDate:function(t,e){return t.actType,b["d"].addToDate(new Date(this.payments.startDate[1]),{days:1})},otherActivityMinEndDate:function(t,e){if("date range"===t.actType)return b["d"].addToDate(new Date(this.otherActivities.startDate[e]),{days:1})},otherActivityMaxEndDate:function(t,e){if("date range"===t.actType)return b["d"].subtractFromDate(new Date(this.seasonEnd),{days:1})},paymentsOpt:function(t){var e=this;if(t>=1){for(var s=this.$lodash.filter(this.getCourse.activities,function(t){return"payments"===t.value})[0],a=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,s.dayOfWeek),i=0,o=a.length,n=0;n<o;n++){var r=b["d"].getDateDiff(a[n],this.payments.startDate[t-1]);r<=0&&i++}var c=this.$lodash.drop(a,i);return this.$lodash.map(c,function(t){return{label:e.$store.getters["schedules/formatDate"](t),value:t}})}var l=this.$lodash.filter(this.getCourse.activities,function(t){return"payments"===t.value})[0],h=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,l.dayOfWeek);return this.$lodash.map(h,function(t){return{label:e.$store.getters["schedules/formatDate"](t),value:t}})},workshopOpt:function(t){var e=this;function s(t,e){var s=e(new Date(t));return s.format("ddd MMMM DD, YYYY")}var a=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,this.getWorkshopActivity.dayOfWeek);if(t>=1){for(var i=0,o=a.length,n=0;n<o;n++){var r=b["d"].getDateDiff(a[n],this.workshops.startDate[t-1]);r<=0&&i++}var c=this.$lodash.drop(a,i),l=this.$lodash.map(c,function(t){return{label:s(t,e.$moment),value:t}});return l}i=0,o=a.length;var h=this.photoshoot.startDate?this.photoshoot.startDate:this.payments.startDate[0];for(n=0;n<o;n++){r=b["d"].getDateDiff(a[n],h);r<=0&&i++}c=this.$lodash.drop(a,i);var u=this.$lodash.union(this.payments.startDate,[this.photoshoot.startDate],[this.photoliking.startDate]),d=c;for(n=0;n<c.length;n++)for(var v=0;v<u.length;v++)b["d"].isSameDate(new Date(c[n]),new Date(u[v]))&&d.splice(n,1);var p=this.$lodash.map(d,function(t){return{label:s(t,e.$moment),value:t}});return p},saveFinalEventLocation:function(){var t=this;this.$store.dispatch("schedules/saveNewLocation",{name:this.newFinalEventLocation,location:this.finalEvent.location,details:this.finalEvent.details}).then(function(e){t.selectFinalEventLocation=e,t.newFinalEventLocation=""}).catch(function(){})},saveOtherActivityLocation:function(t){var e=this;this.$store.dispatch("schedules/saveNewLocation",{name:this.newOtherActivityLocation[t],location:this.otherActivities.location[t],details:this.otherActivities.details[t]}).then(function(s){e.selectOtherActivityLocation[t]=s,e.newOtherActivityLocation[t]="",e.$forceUpdate()}).catch(function(){})},otherActivityOpt:function(t,e){var s=this;function a(t,e){var s=e(new Date(t));return s.format("ddd MMMM DD, YYYY")}if(!1===t.datePick&&"date range"===t.actType){for(var i=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,t.dayOfWeek),o=0,n=0;n<i.length;n++){var r=b["d"].getDateDiff(new Date(i[n]),this.payments.startDate[2]);r<0&&o++}var c=this.$lodash.drop(i,o),l=this.$lodash.union(this.payments.startDate,[this.photoshoot.startDate],[this.photoliking.startDate],this.workshops.startDate),h=(c=this.$lodash.drop(i,o),c);for(n=0;n<c.length;n++)for(var u=0;u<l.length;u++)b["d"].isSameDate(new Date(c[n]),new Date(l[u]))&&h.splice(n,1);var d=this.$lodash.map(h,function(t){return{label:a(t,s.$moment),value:t}});return d}var v=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,t.dayOfWeek),p=(o=0,this.payments.startDate[2]?this.payments.startDate[2]:this.photoliking.startDate);for(n=0;n<v.length;n++){r=b["d"].getDateDiff(new Date(v[n]),p);r<0&&o++}for(l=this.$lodash.union(this.payments.startDate,[this.photoshoot.startDate],[this.photoliking.startDate],this.workshops.startDate,this.getOtherActivityDatesUsed(t,e)),c=this.$lodash.drop(v,o),h=c,n=0;n<c.length;n++)for(u=0;u<l.length;u++)b["d"].isSameDate(new Date(c[n]),new Date(l[u]))&&h.splice(n,1);var m=this.$lodash.map(h,function(t){return{label:a(t,s.$moment),value:t}});return m},saveWorkshopLocation:function(t){var e=this;this.$store.dispatch("schedules/saveNewLocation",{name:this.newWorkshopNameLocation[t],location:this.workshops.location[t],details:this.workshops.details[t]}).then(function(s){e.selectWorkshopLocation[t]=s,e.newWorkshopNameLocation[t]="",e.$forceUpdate()}).catch(function(){})},savePhotoshootLocation:function(){var t=this;this.$store.dispatch("schedules/saveNewLocation",{name:this.newPhotoshootNameLocation,location:this.photoshoot.location,details:this.photoshoot.details}).then(function(e){t.selectPhotoshootLocation=e,t.newPhotoshootNameLocation=""}).catch(function(){})},saveOrientLocation:function(){var t=this;this.$store.dispatch("schedules/saveNewLocation",{name:this.newOrientNameLocation,location:this.orientation.location,details:this.orientation.details}).then(function(e){t.selectOrientationLocation=e,t.newOrientNameLocation=""}).catch(function(){})},paymentDateFormat:function(t){var e=this.$moment(new Date(t));return e.format("ddd MMM DD, YYYY")},setPaymentsAmount:function(){if(this.numberOfPayments%2===0){var t=parseFloat(this.totalAmount)/parseInt(this.numberOfPayments);this.paymentsAmount=new Array(this.numberOfPayments);for(var e=0;e<this.paymentsAmount.length;e++)this.paymentsAmount[e]=t}else{var s=.2*parseFloat(this.totalAmount),a=(parseFloat(this.totalAmount)-s)/(parseInt(this.numberOfPayments)-1);this.paymentsAmount=new Array(this.numberOfPayments),this.paymentsAmount[0]=s;for(e=1;e<this.paymentsAmount.length;e++)this.paymentsAmount[e]=a}},generatePaymentsDate:function(){var t=this.$lodash.filter(this.getCourse.activities,function(t){return"payments"===t.value})[0];console.log("payments",t);var e=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,t.dayOfWeek);console.log("dates",e);var s=1;this.payments.startDate[0]=e[0],"undefined"!==typeof this.payments.startDate[1]&&(this.payments.startDate[1]=e[2],s++);for(var a=s;a<this.numberOfPayments;a++){if("undefined"===typeof e[a+1])return;this.payments.startDate[a]=e[a+1],this.payments.endDate[a]=e[a+1]}},generateOtherActivitiesDate:function(){for(var t=0;t<this.getActivities.length;t++)if("detailed"===this.getActivities[t].actType&&!1===this.getActivities[t].datePick){var e=this.getDatesOfWeek(this.seasonStart,this.getActivities[t].dayOfWeek);this.otherActivities.startDate[t]=e[t],this.otherActivities.endDate[t]=e[t]}else if("date range"===this.getActivities[t].actType&&!1===this.getActivities[t].datePick){var s=this.getDatesOfWeek(this.seasonStart,this.getActivities[t].dayOfWeek);this.otherActivities.startDate[t]=s[t],this.otherActivities.endDate[t]=this.$mathMixin.addDays(new Date(s[t]),this.getActivities[t].duration).toString()}},generatePhotoshootActivity:function(){try{if(!1===this.getPhotoshootActivity.datePick){this.payments.startDate[0]?this.payments.startDate[0]:this.seasonStart;for(var t=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,this.getPhotoshootActivity.dayOfWeek),e=0;e<t.length;e++){var s=b["d"].getDateDiff(new Date(t[e]),this.photoshootMinDate);if(s>=0){this.photoshoot.startDate=t[e];break}}}}catch(t){}},generatePhotolikingActivity:function(){try{if(!1===this.getPhotolikingActivity.datePick){for(var t=this.payments.startDate[1]?this.payments.startDate[1]:this.photoshoot.startDate,e=this.getDatesOfWeek(t,this.seasonEnd,this.getPhotolikingActivity.dayOfWeek),s=0;s<e.length;s++){var a=b["d"].getDateDiff(new Date(e[s]),this.photolikingMinDate);if(a>=0){this.photoliking.startDate=e[s],this.photoliking.endDate=b["d"].addToDate(new Date(e[s]),{days:this.getPhotolikingActivity.duration});break}}this.photoliking.startDate=e[0]}}catch(t){}},setPaymentsToNull:function(){for(var t=0;t<this.numberOfPayments;t++)this.paymentsPickDateChecked[t]=!1},setWorkshopsToNull:function(){for(var t=0;t<this.numberOfWorkshops;t++)this.workshopPickDateChecked[t]=!1,this.workshops.startDate[t]="",this.workshops.actType[t]=this.getWorkshopActivity.actType,this.workshops.time[t]="",this.selectWorkshopLocation[t]="",this.workshops.location[t]="",this.workshops.details[t]=""},setOtherActivitiesToNull:function(){for(var t=0;t<this.getOtherActivity.length;t++)this.otherActivitiesPickDateChecked[t]=!1,this.otherActivities.startDate[t]="",this.otherActivities.endDate[t]="",this.otherActivities.time[t]="",this.otherActivities.actType[t]=this.getOtherActivity[t].actType,this.selectOtherActivityLocation[t]="",this.newOtherActivityLocation[t]="",this.otherActivities.location[t]="",this.otherActivities.details[t]=""},generateAutomatedSched:function(){},getLocation:function(t){return this.$lodash.filter(this.locationTemplates,function(e){return e[".key"]===t})[0]},onChangeOrientLocation:function(t){try{this.orientation.location=this.getLocation(t).location,this.orientation.details=this.getLocation(t).details}catch(t){}},onChangePhotoLocation:function(t){try{this.photoshoot.location=this.getLocation(t).location,this.photoshoot.details=this.getLocation(t).details}catch(t){}},onChangePhotolikingStartDate:function(t){var e=b["d"].addToDate(new Date(t),{days:this.getPhotolikingActivity.duration}),s=b["d"].getDateDiff(new Date(this.photolikingMaxDate),e);if(s<=0){var a=this.getPhotolikingActivity.duration+s;this.photoliking.endDate=b["d"].addToDate(new Date(t),{days:a})}else this.photoliking.endDate=b["d"].addToDate(new Date(t),{days:this.getPhotolikingActivity.duration});this.$forceUpdate()},onChangeWorkshopLocation:function(t){try{this.workshops.location[t]=this.getLocation(this.selectWorkshopLocation[t]).location,this.workshops.details[t]=this.getLocation(this.selectWorkshopLocation[t]).details}catch(t){}},onChangeOtherActivityLocation:function(t){try{this.otherActivities.location[t]=this.getLocation(this.selectOtherActivityLocation[t]).location,this.otherActivities.details[t]=this.getLocation(this.selectOtherActivityLocation[t]).details}catch(t){}},onChangeOtherActivityDateRange:function(t,e){if("date range"===t.actType){var s=b["d"].addToDate(new Date(this.otherActivities.startDate[e]),{days:t.duration}),a=b["d"].getDateDiff(new Date(this.otherActivityMaxEndDate(t,e)),s);if(a<=0){var i=t.duration+a;this.otherActivities.endDate[e]=b["d"].addToDate(new Date(this.otherActivities.startDate[e]),{days:i})}else this.otherActivities.endDate[e]=b["d"].addToDate(new Date(this.otherActivities.startDate[e]),{days:t.duration})}},onChangeFinalEventLocation:function(t){try{this.finalEvent.location=this.getLocation(t).location,this.finalEvent.details=this.getLocation(t).details}catch(t){}},paymentsMinDate:function(t){return t>0?b["d"].addToDate(new Date(this.payments.startDate[t-1]),{days:1}):b["d"].addToDate(new Date(this.seasonStart),{days:1})},workshopsMinDate:function(t){return t>0?b["d"].addToDate(new Date(this.workshops.startDate[t-1]),{days:1}):b["d"].addToDate(new Date(this.payments.startDate[1]),{days:1})},isFirstWorkshopIsNull:function(t){return t>0&&null===this.workshops.startDate[t-1]},clearOtherActivitySelectLocation:function(t){this.selectOtherActivityLocation[t]="",this.$forceUpdate()},clearWorkshopSelectLocation:function(t){this.selectWorkshopLocation[t]="",this.$forceUpdate()},removeTime:function(t){var e=new Date(t);return e.setHours(0,0,0,0),e},setTime:function(t,e){var s=new Date(e).getHours(),a=new Date(e).getMinutes(),i=new Date(t);return i.setHours(s,a,0,0),i},orientationToPreview:function(){this.orientation.startDate=this.setTime(this.orientation.startDate,this.orientation.time),this.orientation.endDate=this.setTime(this.orientation.startDate,this.orientation.time),this.orientation.title="Batch(1)_Orientation",this.orientation.locationID=this.selectOrientationLocation,this.plottedActivities.push(this.orientation)},paymentsToPreview:function(){for(var t=0;t<this.numberOfPayments;t++){var e={startDate:this.removeTime(this.payments.startDate[t]),endDate:this.removeTime(this.payments.startDate[t]),time:"",location:"",details:"",eventKey:this.eventKey,id:"".concat(this.eventCode,"(").concat(this.seasonNumber,")_batch(1)_payment(").concat(t+1,")"),title:"Batch(1)_Payment(".concat(t+1,")"),type:"payments",actType:"detailed",classes:this.classes,amount:this.paymentsAmount[t]};this.plottedActivities.push(e)}},photoshootToPreview:function(){this.hasPhotoshoot&&(this.photoshoot.startDate=this.setTime(this.photoshoot.startDate,this.photoshoot.time),this.photoshoot.endDate=this.setTime(this.photoshoot.startDate,this.photoshoot.time),this.photoshoot.id="".concat(this.eventCode,"(").concat(this.seasonNumber,")_batch(1)_").concat(this.getPhotoshootActivity.value),this.photoshoot.title="Batch(1)_".concat(this.getPhotoshootActivity.label),this.photoshoot.locationID=this.selectPhotoshootLocation,this.plottedActivities.push(this.photoshoot))},photolikingToPreview:function(){this.hasPhotoliking&&(this.photoliking.startDate=this.removeTime(this.photoliking.startDate),this.photoliking.endDate=this.removeTime(this.photoliking.endDate),this.photoliking.id="".concat(this.eventCode,"(").concat(this.seasonNumber,")_batch(1)_").concat(this.getPhotolikingActivity.value),this.photoliking.title="Batch(1)_".concat(this.getPhotolikingActivity.label),this.plottedActivities.push(this.photoliking))},workshopsToPreview:function(){if(this.hasWorkshops)for(var t=0;t<this.numberOfWorkshops;t++){var e={startDate:this.setTime(this.workshops.startDate[t],this.workshops.time[t]),endDate:this.setTime(this.workshops.startDate[t],this.workshops.time[t]),time:this.workshops.time[t],location:this.workshops.location[t],details:this.workshops.details[t],eventKey:this.eventKey,id:"".concat(this.eventCode,"(").concat(this.seasonNumber,")_batch(1)_").concat(this.getWorkshopActivity.value,"(").concat(t+1,")"),title:"Batch(1)_Workshop(".concat(t+1,")"),type:"workshops",actType:this.getWorkshopActivity.actType,locationID:this.selectWorkshopLocation[t],classes:this.classes};this.plottedActivities.push(e)}},otherActivitiesToPreview:function(){for(var t=0;t<this.getOtherActivity.length;t++)if("detailed"===this.getOtherActivity[t].actType){var e={startDate:this.setTime(this.otherActivities.startDate[t],this.otherActivities.time[t]),endDate:this.setTime(this.otherActivities.startDate[t],this.otherActivities.time[t]),time:this.otherActivities.time[t],location:this.otherActivities.location[t],details:this.otherActivities.details[t],eventKey:this.eventKey,id:"".concat(this.eventCode,"(").concat(this.seasonNumber,")_batch(1)_").concat(this.getOtherActivity[t].value),title:"Batch(1)_".concat(this.getOtherActivity[t].label),type:this.getOtherActivity[t].value,actType:this.getOtherActivity[t].actType,locationID:this.selectOtherActivityLocation[t],classes:this.classes};this.plottedActivities.push(e)}else{var s={startDate:this.removeTime(this.otherActivities.startDate[t]),endDate:this.removeTime(this.otherActivities.endDate[t]),time:this.otherActivities.time[t],location:this.otherActivities.location[t],details:this.otherActivities.details[t],eventKey:this.eventKey,id:"".concat(this.eventCode,"(").concat(this.seasonNumber,")_batch(1)_").concat(this.getOtherActivity[t].value),title:"Batch(1)_".concat(this.getOtherActivity[t].label),type:this.getOtherActivity[t].value,actType:this.getOtherActivity[t].actType,locationID:this.selectOtherActivityLocation[t],classes:this.classes};this.plottedActivities.push(s)}},finalEventToPreview:function(){this.finalEvent.startDate=this.setTime(this.finalEvent.startDate,this.finalEvent.time),this.finalEvent.endDate=this.setTime(this.finalEvent.startDate,this.finalEvent.time),this.finalEvent.title="Batch(1)_Final Event",this.finalEvent.locationID=this.selectFinalEventLocation,this.plottedActivities.push(this.finalEvent)},toPreview:function(){this.plottedActivities=[],this.orientationToPreview(),this.paymentsToPreview(),this.photoshootToPreview(),this.photolikingToPreview(),this.workshopsToPreview(),this.otherActivitiesToPreview(),this.finalEventToPreview()},test:function(){console.log(this.seasonStart,"seasonStart"),console.log(this.seasonEnd,"seasonEnd");var t=this.getDatesOfWeek(this.seasonStart,this.seasonEnd,"sunday");console.log(t,"dates")},getDatesOfWeek:function(t,e,s){function a(t,e){return new Date(e,t,0).getDate()}var i=new Array,o=new Array,n=new Array,r=new Array,c=new Array,l=new Array,h=new Array,u=1,d=new Date(t);do{for(var v=a(d.getMonth(),d.getFullYear()),p=0;p<v;p++){var m=new Date(d.getFullYear(),d.getMonth(),p);switch(m.getDay()){case 0:var f=this.$store.getters["startUp/getPlainValue"](d),y=new Date(f);y.setDate(p);var g=this.$mathMixin.dayDiff(new Date(t),y),k=this.$mathMixin.dayDiff(new Date(e),y);g>0&&k<0&&h.push(y.toString());break;case 1:f=this.$store.getters["startUp/getPlainValue"](d),y=new Date(f);y.setDate(p);g=this.$mathMixin.dayDiff(new Date(t),y),k=this.$mathMixin.dayDiff(new Date(e),y);g>0&&k<0&&i.push(y.toString());break;case 2:f=this.$store.getters["startUp/getPlainValue"](d),y=new Date(f);y.setDate(p);g=this.$mathMixin.dayDiff(new Date(t),y),k=this.$mathMixin.dayDiff(new Date(e),y);g>0&&k<0&&o.push(y.toString());break;case 3:f=this.$store.getters["startUp/getPlainValue"](d),y=new Date(f);y.setDate(p);g=this.$mathMixin.dayDiff(new Date(t),y),k=this.$mathMixin.dayDiff(new Date(e),y);g>0&&k<0&&n.push(y.toString());break;case 4:f=this.$store.getters["startUp/getPlainValue"](d),y=new Date(f);y.setDate(p);g=this.$mathMixin.dayDiff(new Date(t),y),k=this.$mathMixin.dayDiff(new Date(e),y);g>0&&k<0&&r.push(y.toString());break;case 5:f=this.$store.getters["startUp/getPlainValue"](d),y=new Date(f);y.setDate(p);g=this.$mathMixin.dayDiff(new Date(t),y),k=this.$mathMixin.dayDiff(new Date(e),y);g>0&&k<0&&c.push(y.toString());break;case 6:f=this.$store.getters["startUp/getPlainValue"](d),y=new Date(f);y.setDate(p);g=this.$mathMixin.dayDiff(new Date(t),y),k=this.$mathMixin.dayDiff(new Date(e),y);g>0&&k<0&&l.push(y.toString());break;default:console.log("an error occur");break}}d.setDate(1),d.setMonth(d.getMonth()+1),u++}while(u<=5);switch(s){case"monday":return i;case"tuesday":return o;case"wednesday":return n;case"thursday":return r;case"friday":return c;case"saturday":return l;case"sunday":return h;default:console.log("an error occur in returning value");break}}}},w=A,$=(s("WoL8"),Object(f["a"])(w,k,D,!1,null,null,null)),C=$.exports,q=s("vL7x"),S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"q-ma-md"},[s("q-field",{staticClass:"col q-ma-md",attrs:{error:t.$store.getters["settings/isExistCourses"](t.courseName),"error-label":"Course Already Exist"}},[s("q-input",{attrs:{"float-label":"Course Name",color:"primary",error:t.$v.courseName.$error},on:{blur:function(e){t.capitalize()}},model:{value:t.courseName,callback:function(e){t.courseName=e},expression:"courseName"}})],1),s("div",[s("div",{staticClass:"flex justify-between"},[s("p",{staticClass:"q-title text-weight-bold"},[t._v("Activities")]),t.isNewActivity?t._e():s("div",[s("q-btn",{attrs:{rounded:"",color:"tertiary",size:"sm",icon:"add",label:"Add Activity"},on:{click:function(e){t.isNewActivity=!0}}})],1),t.isNewActivity?s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("q-input",{attrs:{"float-label":"Activity Name"},model:{value:t.newActivityLabel,callback:function(e){t.newActivityLabel=e},expression:"newActivityLabel"}})],1),s("div",{staticClass:"flex items-center col"},[s("q-btn",{attrs:{rounded:"",color:"positive",size:"sm",label:"ok"},on:{click:function(e){t.addNewActivity()}}}),s("q-btn",{attrs:{rounded:"",color:"negative",size:"sm",label:"cancel"},on:{click:function(e){t.isNewActivity=!1}}})],1)]):t._e()]),s("draggable",{staticClass:"list-group",attrs:{element:"ul",options:t.dragOptions,move:t.newCourseCheckMove},on:{start:function(e){t.isDragging=!0},end:function(e){t.isDragging=!1}},model:{value:t.newCourseDefaultActivities,callback:function(e){t.newCourseDefaultActivities=e},expression:"newCourseDefaultActivities"}},[s("transition-group",{attrs:{type:"transition",name:"flip-list"}},t._l(t.newCourseDefaultActivities,function(e,a){return s("q-item",{key:a},[s("q-item-main",[s("div",{staticClass:"flex row items-center"},[s("div",{staticClass:"q-mr-md col"},[s("q-input",{attrs:{readonly:t.isCanChange(e)},model:{value:e.label,callback:function(s){t.$set(e,"label",s)},expression:"activity.label"}})],1),s("div",{staticClass:"col-5"},[t.actPrimary(e,a)?s("q-btn-toggle",{attrs:{size:"sm",rounded:"",disable:e.datePick,"toggle-color":"primary",options:[{label:"M",value:"monday"},{label:"T",value:"tuesday"},{label:"W",value:"wednesday"},{label:"TH",value:"thursday"},{label:"F",value:"friday"},{label:"SAT",value:"saturday"},{label:"SUN",value:"sunday"}]},model:{value:e.dayOfWeek,callback:function(s){t.$set(e,"dayOfWeek",s)},expression:"activity.dayOfWeek"}}):t._e(),t.actPrimary(e,a)?s("q-checkbox",{staticClass:"q-body-1 q-ml-md",attrs:{label:"Picked Date"},on:{focus:function(t){e.dayOfWeek=""}},model:{value:e.datePick,callback:function(s){t.$set(e,"datePick",s)},expression:"activity.datePick"}}):t._e()],1),s("div",{staticClass:"col-4"},[t.actPrimary2(e,a)?s("q-btn-toggle",{attrs:{readonly:t.isReadOnlyActiivty(e,a),size:"sm",rounded:"","toggle-color":"secondary",options:[{label:"Time/Location/Details",value:"detailed"},{label:"Date Range",value:"date range"}]},model:{value:e.actType,callback:function(s){t.$set(e,"actType",s)},expression:"activity.actType"}}):t._e(),"date range"===e.actType?s("q-input",{staticClass:"q-mt-md",attrs:{type:"number","stack-label":"Duration(days)"},model:{value:e.duration,callback:function(s){t.$set(e,"duration",s)},expression:"activity.duration"}}):t._e()],1)])]),t.actPrimary3(e,a)?s("q-item-side",[s("q-icon",{attrs:{name:t.isDontMove2(e,a)}}),"payment"!=e.value?s("q-btn",{staticClass:"q-ml-md",attrs:{round:"",color:"negative",size:"xs",icon:"remove"},on:{click:function(e){t.removeActivity2(a)}}}):t._e()],1):t._e()],1)}))],1)],1),s("q-inner-loading",{attrs:{visible:t.newCourseLoading}},[s("q-spinner",{attrs:{size:"50px",color:"primary"}})],1)],1)])},x=[];S._withStripped=!0;s("VRzm");var P=s("FRYs"),O=s.n(P),L=function(t,e){return!!e.$store.getters["settings/isExistCourses"](e.courseName)},E={components:{draggable:O.a},validations:function(){return{courseName:{required:v["required"],isCourseNameError:L},activityName:{required:v["required"]}}},computed:{dragOptions:function(){return{animation:0,ghostClass:"ghost",group:"label",disabled:this.editActivity}}},data:function(){return{newCourseLoading:!1,courseName:"",isNewActivity:!1,newActivityLabel:"",newCourseDefaultActivities:[{day:"",datePick:!1,dayOfWeek:"",duration:0,actType:"detailed",label:"Orientation",value:"orientation",visible:!0},{day:"",duration:0,datePick:!1,dayOfWeek:"",actType:"detailed",eventType:"",label:"Payments",value:"payments",visible:!0},{day:"",duration:0,datePick:!1,dayOfWeek:"",actType:"detailed",eventType:"",label:"Photoshoot",value:"photoshoot",visible:!0},{day:"",duration:5,datePick:!1,dayOfWeek:"",actType:"date range",eventType:"",label:"Photoliking",value:"photoliking",visible:!0},{day:"",duration:0,datePick:!1,dayOfWeek:"",actType:"detailed",eventType:"",label:"Workshops",value:"workshops",visible:!0},{day:"",duration:0,datePick:!1,dayOfWeek:"",actType:"detailed",eventType:"",label:"Final Event",value:"final event",visible:!0}]}},methods:{saveNewCourse2:function(){var t=n()(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){!1===e.$v.courseName.$error&&!1===e.$v.courseName.isCourseNameError?e.$q.dialog({title:"Save Confirmation",message:"Do you want to save ?",ok:"Yes",cancel:"No"}).then(function(){var s={courseName:e.courseName,activities:e.newCourseDefaultActivities};e.$store.dispatch("settings/saveNewCourse2",s).then(function(s){e.courseName="",e.newCourseDefaultActivities=[{day:"",datePick:!1,actType:"detailed",label:"Orientation",value:"orientation",visible:!0},{day:"",datePick:!1,actType:"",eventType:"",label:"Payment",value:"payment",visible:!0},{day:"",datePick:!1,actType:"",eventType:"",label:"Workshops",value:"workshops",visible:!0},{dayAfter:{dayOfWeek:"",dateNumber:0,dateType:0},datePick:!1,actType:"detailed",eventType:"",label:"Final Event",value:"final event",visible:!0}],e.$store.state.schedules.newCourseModal=!1,t(s)})}).catch(function(){}):e.$q.notify("Invalid Course Name")}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),removeActivity2:function(t){this.newCourseDefaultActivities.splice(t,1)},isDontMove2:function(t,e){return e<=1?"":"open_with"},isReadOnlyActiivty:function(t,e){return"photoshoot"===t.value||"photoshoots"===t.value||"photoliking"===t.value||"photo liking"===t.value},actPrimary:function(t,e){return"orientation"!==t.value&&e!==this.newCourseDefaultActivities.length-1},actPrimary2:function(t,e){return 0!==e&&e!==this.newCourseDefaultActivities.length-1&&"payments"!==t.value&&"workshops"!==t.value&&"workshop"!==t.value},actPrimary3:function(t,e){return 0!==e&&e!==this.newCourseDefaultActivities.length-1&&"payments"!==t.value},isCanChange:function(t){return"orientation"===t.value||"payments"===t.value},newCourseCheckMove:function(t){return"orientation"!==t.draggedContext.element.value&&"payments"!==t.draggedContext.element.value&&1!==t.draggedContext.futureIndex&&"final event"!==t.draggedContext.element.value&&t.draggedContext.futureIndex!==t.relatedContext.list.length-1},capitalize:function(){try{var t=this.courseName;this.courseName=this.$store.getters["settings/titleCase"](t)}catch(t){}},checkHasDuplicate:function(t){var e=this.$lodash.findIndex(this.newCourseDefaultActivities,function(e){return e.value===t});return!(e<=-1)},fillActivityTypeIsPhotoshootOrPhotoliking:function(t){return"photoshoot"===t||"photoshoots"===t?"detailed":"photoliking"===t||"photo liking"===t?"date range":""},addNewActivity:function(){!1===this.checkHasDuplicate(this.newActivityLabel)?(this.newCourseDefaultActivities.splice(2,0,{day:"",datePick:!1,actType:this.fillActivityTypeIsPhotoshootOrPhotoliking(this.newActivityLabel),eventType:"",label:this.$store.getters["settings/titleCase"](this.newActivityLabel),value:this.newActivityLabel,visible:!0}),this.newActivityLabel="",this.isNewActivity=!1):this.$q.notify("Invalid Activity Name")}}},N=E,T=Object(f["a"])(N,S,x,!1,null,null,null),M=T.exports,_={components:{Activities:C,Preview:q["a"],ActivityModal:g,draggable:O.a,NewCourse:M},validations:function(){return{season:{course:{required:v["required"]},ticketCount:{required:v["required"],between:Object(v["between"])(1,200)},ticketPrice:{required:v["required"],between:Object(v["between"])(1,9999)},discount:{required:v["required"],between:Object(v["between"])(1,9999)},numberOfPayments:{required:v["required"],between:Object(v["between"])(1,20)},numberOfWorkshops:{between:Object(v["between"])(1,10)},batchCapacity:{between:Object(v["between"])(1,10)},seasonStart:{required:v["required"]},seasonEnd:{required:v["required"]},colorCode:{required:v["required"]}},courseName:{required:v["required"]},activityName:{required:v["required"]}}},created:function(){this.eventKey=this.$route.params.id},mounted:function(){var t=this;this.$bindAsArray("courses",this.$database.ref("settings/courses"),null,function(){t.$bindAsArray("event",t.$database.ref("events").orderByKey().equalTo(t.eventKey),null,function(){t.$bindAsArray("schedules2",t.$database.ref("event_schedules"),null,function(){t.$bindAsArray("seasonDraft",t.$database.ref("seasonDraftTemplate").orderByChild("eventKey").equalTo(t.eventKey),null,function(){t.$store.state.settings.courses=t.courses,t.$store.state.startUp.schedules=t.schedules2})})})})},watch:{getTotalAmount:function(){parseFloat(this.season.ticketCount),parseFloat(this.season.ticketPrice)}},computed:{newCourseModal:{get:function(){return this.$store.state.schedules.newCourseModal},set:function(t){this.$store.state.schedules.newCourseModal=t}},getSeasonDraftKey:function(){try{return this.seasonDraft[0]?this.seasonDraft[0][".key"]:""}catch(t){}},getEventCode:function(){var t=this;try{var e=this.$lodash.findIndex(this.$store.state.startUp.events,function(e){return e[".key"]===t.eventKey});return this.$store.state.startUp.events[e].eventCode}catch(t){}},getSeasonStartMinDate:function(){return this.getLatestSeason>=2?this.getLastBatchOrientation:this.$mathMixin.addDays(new Date,1)},getLastBatchOrientation:function(){var t=this;try{this.$bindAsArray("events3",this.$database.ref("events"));var e=this.$lodash.find(this.events3,function(e){return e[".key"]===t.eventKey}),s=e.seasons.length,a=e.seasons[s-1],i=this.$lodash.filter(this.schedules2,function(e){return e.eventKey===t.eventKey&&e.seasonName===a.seasonName}),o=this.$lodash.maxBy(i,function(t){return t.batchNumber}),n=o.activities[0];return n.startDate}catch(t){return{}}},isHasWorkshop:function(){this.getCourseActivities;var t=!1;return this.$lodash.forEach(this.getCourseActivities,function(e){"workshop"!==e.value&&"workshops"!==e.value||(t=!0)}),t},isReadyToLaunch:function(){return this.isNotComplete},isSeasonStartEmpty:function(){return""===this.season.seasonStart},getCourseActivities:function(){var t=this;try{var e=this.$lodash.filter(this.courses,function(e){return e[".key"]===t.season.course})[0];return e.activities}catch(t){return[]}},dragOptions:function(){return{animation:0,ghostClass:"ghost",group:"label",disabled:this.isEditNewActivity}},parseActivities:function(){return this.$store.getters["settings/parseActivities"]},activityErrorLabel:function(){return""===this.activityName?"":this.isEditNewActivity?"":"Activity Already Exist"},activityError:function(){return!this.isEditNewActivity&&this.$store.getters["settings/isExistActivity"]({activities:this.newCourseActivities,activity:this.activityName})},getLastActivity:function(){try{var t=this.newCourseActivities.length,e=this.newCourseActivities[t-1];return e}catch(t){return""}},event2:{get:function(){return this.$store.getters["startUp/getEvent"](this.eventKey)},set:function(t){this.$store.getters["startUp/getEvent"](this.eventKey)}},contractSigned:{get:function(){return this.$store.state.startUp.contractSigned},set:function(t){this.$store.state.startUp.contractSigned=t}},isLastSeasonClosed:function(){var t=this;try{var e=this.$lodash.findIndex(this.events,function(e){return e[".key"]===t.eventKey});return"closed"===this.events[e].seasons[this.getLastSeason].status}catch(t){return!1}},events:function(){return this.$store.state.startUp.events},schedules:function(){return this.$store.state.startUp.schedules},dateToday:function(){return new Date},getEventName:function(){try{return this.event[0].eventName}catch(t){}},getSeasons:function(){try{return this.event[0].seasons}catch(t){return[]}},getLastSeason:function(){var t=this.$store.getters["startUp/getEvent"](this.eventKey),e=t.seasons.length;return e-1},getLatestSeason:function(){try{return 0!=this.event[0].seasons.length?++this.event[0].seasons.length:1}catch(t){return 1}},getInstallmentAmount:function(){try{var t=parseFloat(this.season.ticketCount)*parseFloat(this.season.ticketPrice)+this.season.discount,e=parseInt(t)||0;return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return 0}},getInstallmentAmount2:function(){try{var t=parseFloat(this.season.ticketCount)*parseFloat(this.season.ticketPrice)+this.season.discount,e=parseInt(t)||0;return e}catch(t){return 0}},getTotalAmount:function(){try{var t=parseFloat(this.season.ticketCount)*parseFloat(this.season.ticketPrice),e=parseInt(t)||0;return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return 0}},courseOpt:function(){var t=this.$lodash.map(this.courses,function(t){return{label:t.courseName,value:t[".key"]}});return t},seasonModal:{get:function(){return this.$store.state.users.seasonModal},set:function(t){this.$store.state.users.seasonModal=t}},seasonLoading:{get:function(){return this.$store.state.users.seasonLoading},set:function(t){this.$store.state.users.seasonLoading=t}},activityModal:{get:function(){return this.$store.state.users.activityModal},set:function(t){this.$store.state.users.activityModal=t}},colorOpt:function(){for(var t=this.$store.state.startUp.events,e=c()(this.$store.state.startUp.colorOpt),s=0;s<t.length;s++)if("undefined"!==typeof t[s].seasons)for(var a=0;a<e.length;a++)t[s].seasons[0].colorCode===e[a].value&&(e[a].visible=!1);var i=this.$lodash.filter(e,function(t){return!0===t.visible});return i},checkIfHasSavedDraft:function(){return void 0!==this.seasonDraft&&0!==this.seasonDraft.length}},data:function(){return{isRestoreAsDraft:!1,drafts:[],selectOptions:[],select:"",events3:[],seasonEndError:!1,seasonStartError:!1,editSeasonModal:!1,schedules2:[],activityArrangement:[],arrangeModal:!1,activityIndex:-1,dateTypeOpt:[{label:"days",value:"days"},{label:"weeks",value:"weeks"},{label:"months",value:"months"}],isEditNewActivity:!1,activityStatus:{time:!0,dueDate:!1,location:!0,details:!0},dayAfter:{dateNumber:0,dateType:"days"},activityName:"",newActivityModal:!1,newCourseActivities:[{dayAfter:{dateNumber:0,dateType:"days"},details:!1,eventType:"",dueDate:!1,label:"Orientation",location:!0,time:!0,value:"orientation",visible:!0},{dayAfter:{dateNumber:1,dateType:"weeks"},details:!1,eventType:"",dueDate:!1,label:"Payment",location:!1,time:!1,value:"payment",visible:!0},{dayAfter:{dateNumber:3,dateType:"days"},details:!1,dueDate:!1,eventType:"",label:"Photoshoot",location:!0,time:!0,value:"photoshoot",visible:!0},{dayAfter:{dateNumber:2,dateType:"days"},details:!1,dueDate:!0,eventType:"",label:"Photoliking",location:!1,time:!1,value:"photoliking",visible:!0},{dayAfter:{dateNumber:0,dateType:"days"},details:!0,dueDate:!1,eventType:"",label:"Workshop",location:!0,time:!0,value:"workshop",visible:!0},{dayAfter:{dateNumber:0,dateType:"days"},details:!0,dueDate:!1,eventType:"",label:"General Rehersal",location:!0,time:!0,value:"general rehersal",visible:!0},{dayAfter:{dateNumber:0,dateType:"days"},details:!0,dueDate:!1,eventType:"",label:"Final Event",location:!0,time:!0,value:"final event",visible:!0}],courseName:"",courseModal:!1,isEdit:!1,eventKey:"",courses:[],event:[],season:{course:"",ticketCount:"",ticketPrice:"",discount:"",totalAmount:this.getInstallmentAmount2,numberOfPayments:3,numberOfWorkshops:3,batchCapacity:4,seasonStart:"",seasonEnd:"",colorCode:""},columns:[{name:"seasonName",required:!0,label:"Season Name",align:"left",field:"seasonName",sortable:!0},{name:"seasonNumber",required:!0,label:"Season No.",align:"center",field:"seasonNumber",sortable:!0},{name:"seasonStart",required:!0,label:"Start",align:"left",sortable:!0},{name:"seasonEnd",required:!0,label:"End",align:"center",sortable:!0},{name:"status",required:!0,label:"Status",align:"center",field:"status",sortable:!0},{name:"batches",required:!0,label:"Batches",align:"center",sortable:!0},{name:"participants",required:!0,label:"No. of Participants",style:"width: 50px",align:"center",sortable:!0},{name:"actions",required:!0,label:"Actions",align:"center",field:"name",sortable:!1}],pagination:{sortBy:null,descending:!1,page:1,rowsPerPage:10}}},methods:{getSetTempSeasonDraft:function(){var t=n()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.waitForSeasonDraft;case 2:this.$store.state.schedules.tempSeasonDraft=t.sent;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),hasSavedDraft:function(){var t=this;void 0!==this.seasonDraft&&0!==this.seasonDraft.length&&this.$q.dialog({title:"Draft",message:"Do you want to continue saved draft?",ok:"Yes",cancel:"No"}).then(function(){t.fillSeasonDraft()}).catch(function(){})},saveAsDraft:function(){var t=this;this.$q.dialog({title:"Save as draft",message:"Do you want to save as draft?",ok:"Yes",cancel:"No"}).then(function(){var e={};if(t.season.totalAmount=t.getInstallmentAmount2,e.season=t.season,t.setToStrings(),e.photolikingPickDateChecked=t.$store.state.schedules.photolikingPickDateChecked,e.photoshootPickDateChecked=t.$store.state.schedules.photoshootPickDateChecked,e.paymentsPickDateChecked=t.$store.state.schedules.paymentsPickDateChecked,e.workshopPickDateChecked=t.$store.state.schedules.workshopPickDateChecked,e.otherActivitiesPickDateChecked=t.$store.state.schedules.otherActivitiesPickDateChecked,e.selectFinalEventLocation=t.$store.state.schedules.selectFinalEventLocation,e.selectOtherActivityLocation=t.$store.state.schedules.selectOtherActivityLocation,e.selectWorkshopLocation=t.$store.state.schedules.selectWorkshopLocation,e.selectPhotoshootLocation=t.$store.state.schedules.selectPhotoshootLocation,e.selectOrientationLocation=t.$store.state.schedules.selectOrientationLocation,e.orientation=t.$store.state.schedules.orientation,e.paymentsAmount=t.$store.state.schedules.paymentsAmount,e.payments=t.$store.state.schedules.payments,e.photoshoot=t.$store.state.schedules.photoshoot,e.photoliking=t.$store.state.schedules.photoliking,e.workshops=t.$store.state.schedules.workshops,e.otherActivities=t.$store.state.schedules.otherActivities,e.finalEvent=t.$store.state.schedules.finalEvent,e.plottedActivities=t.$store.state.schedules.plottedActivities,e.seasonNumber=t.getLatestSeason,e.eventKey=t.eventKey,e.dateCreated=(new Date).toString(),t.checkIfHasSavedDraft){var s=t.seasonDraft[0][".key"];t.$store.dispatch("schedules/updateAsDraft",{key:s,draft:e}).then(function(){t.clearDataAfterSaveAsDraft(),t.$refs.stepper.goToStep("first"),t.seasonModal=!1}).catch(function(){})}else t.$store.dispatch("schedules/saveAsDraft",e).then(function(){t.clearDataAfterSaveAsDraft(),t.$refs.stepper.goToStep("first"),t.seasonModal=!1}).catch(function(){})}).catch(function(){})},fillSeasonDraft:function(){var t=this.$store.getters["startUp/getPlainValue"](this.seasonDraft[0]);if(this.season=t.season,this.$store.state.schedules.photolikingPickDateChecked=t.photolikingPickDateChecked,this.$store.state.schedules.photoshootPickDateChecked=t.photoshootPickDateChecked,this.$store.state.schedules.paymentsPickDateChecked=t.paymentsPickDateChecked,this.$store.state.schedules.workshopPickDateChecked=t.workshopPickDateChecked,this.$store.state.schedules.otherActivitiesPickDateChecked=t.otherActivitiesPickDateChecked,this.$store.state.schedules.selectFinalEventLocation=t.selectFinalEventLocation,this.$store.state.schedules.selectOtherActivityLocation=t.selectOtherActivityLocation,this.$store.state.schedules.selectWorkshopLocation=t.selectWorkshopLocation,this.$store.state.schedules.selectPhotoshootLocation=t.selectPhotoshootLocation,this.$store.state.schedules.selectOrientationLocation=t.selectOrientationLocation,this.$store.state.schedules.orientation=t.orientation,this.$store.state.schedules.paymentsAmount=t.paymentsAmount,this.$store.state.schedules.payments=t.payments,this.$store.state.schedules.photoshoot=t.photoshoot,this.$store.state.schedules.photoliking=t.photoliking,"undefined"!==typeof t.workshops.startDate)this.$store.state.schedules.workshops=t.workshops;else{t.workshops.startDate=[];for(var e=0;e<t.season.numberOfWorkshops;e++)this.workshops.startDate[e]=null,this.workshops.endDate[e]=null}if(this.$store.state.schedules.otherActivities=t.otherActivities,this.$store.state.schedules.finalEvent=t.finalEvent,"undefined"!==typeof t.plottedActivities){for(e=0;e<t.plottedActivities.length;e++)t.plottedActivities[e].startDate=new Date(t.plottedActivities[e].startDate),t.plottedActivities[e].endDate=new Date(t.plottedActivities[e].endDate);this.$store.state.schedules.plottedActivities=t.plottedActivities}this.isRestoreAsDraft=!0},clearDataAfterSaveAsDraft:function(){this.season={course:"",ticketCount:"",ticketPrice:"",discount:"",totalAmount:0,numberOfPayments:3,numberOfWorkshops:3,batchCapacity:4,seasonStart:"",seasonEnd:"",colorCode:""},this.$store.state.schedules.photolikingPickDateChecked=!1,this.$store.state.schedules.photoshootPickDateChecked=!1,this.$store.state.schedules.paymentsPickDateChecked=[],this.$store.state.schedules.workshopPickDateChecked=[],this.$store.state.schedules.otherActivitiesPickDateChecked=[],this.$store.state.schedules.selectFinalEventLocation="",this.$store.state.schedules.selectOtherActivityLocation=[],this.$store.state.schedules.selectWorkshopLocation=[],this.$store.state.schedules.selectPhotoshootLocation="",this.$store.state.schedules.selectOrientationLocation="",this.$store.state.schedules.orientation={startDate:"",endDate:"",time:"Sat Jan 12 2019 08:00:00",location:"",details:"",eventKey:"",id:"",title:"Orientation",actType:"detailed",type:"orientation",classes:""},this.$store.state.schedules.paymentsAmount=[],this.$store.state.schedules.payments={startDate:[],endDate:[],eventKey:[],id:[],title:[],actType:"",type:[],classes:[],amount:[]},this.$store.state.schedules.photoshoot={startDate:"",endDate:"",time:"Sat Jan 12 2019 08:00:00",location:"",details:"",eventKey:"",id:"",title:"",actType:"detailed",type:"photoshoot",classes:""},this.$store.state.schedules.photoliking={startDate:"",endDate:"",time:"",location:"",details:"",eventKey:"",id:"",title:"",type:"photoliking",actType:"date range",classes:""},this.$store.state.schedules.workshops={startDate:[],endDate:[],time:[],location:[],details:[],eventKey:[],id:[],title:[],actType:[],type:[],classes:[]},this.$store.state.schedules.otherActivities={startDate:[],endDate:[],time:[],location:[],details:[],eventKey:[],id:[],title:[],type:[],actType:[],classes:[]},this.$store.state.schedules.finalEvent={startDate:"",endDate:"",time:"Sat Jan 12 2019 08:00:00",location:"",details:"",eventKey:"",id:"",title:"Final Event",type:"final event",actType:"detailed",classes:""},this.$store.state.schedules.plottedActivities=[]},setToStrings:function(){this.$store.state.schedules.orientation.startDate=this.$store.state.schedules.orientation.startDate.toString(),this.$store.state.schedules.orientation.endDate=this.$store.state.schedules.orientation.endDate.toString();for(var t=0;t<this.$store.state.schedules.payments.startDate.length;t++)this.$store.state.schedules.payments.startDate[t]instanceof Date&&(this.$store.state.schedules.payments.startDate[t]=this.$store.state.schedules.payments.startDate[t].toString(),this.$store.state.schedules.payments.endDate[t]=this.$store.state.schedules.payments.endDate[t].toString());this.$store.state.schedules.photoshoot.endDate=this.$store.state.schedules.photoshoot.endDate.toString(),this.$store.state.schedules.photoshoot.startDate=this.$store.state.schedules.photoshoot.startDate.toString(),this.$store.state.schedules.photoliking.endDate=this.$store.state.schedules.photoliking.endDate.toString(),this.$store.state.schedules.photoliking.startDate=this.$store.state.schedules.photoliking.startDate.toString();for(t=0;t<this.$store.state.schedules.workshops.startDate.length;t++)this.$store.state.schedules.workshops.startDate[t]instanceof Date&&(this.$store.state.schedules.workshops.startDate[t]=this.$store.state.schedules.workshops.startDate[t].toString(),this.$store.state.schedules.workshops.endDate[t]=this.$store.state.schedules.workshops.endDate[t].toString());for(t=0;t<this.$store.state.schedules.otherActivities.startDate.length;t++)this.$store.state.schedules.workshops.startDate[t]instanceof Date&&(this.$store.state.schedules.otherActivities.startDate[t]=this.$store.state.schedules.otherActivities.startDate[t].toString());for(var e=0;e<this.$store.state.schedules.otherActivities.endDate.length;e++)this.$store.state.schedules.otherActivities.endDate[e]=this.$store.state.schedules.otherActivities.endDate[e].toString();this.$store.state.schedules.finalEvent.endDate=this.$store.state.schedules.finalEvent.endDate.toString(),this.$store.state.schedules.finalEvent.startDate=this.$store.state.schedules.finalEvent.startDate.toString();for(t=0;t<this.$store.state.schedules.plottedActivities.length;t++)this.$store.state.schedules.plottedActivities[t].startDate=this.$store.state.schedules.plottedActivities[t].startDate.toString(),this.$store.state.schedules.plottedActivities[t].endDate=this.$store.state.schedules.plottedActivities[t].startDate.toString()},toBackActivity:function(){this.$refs.stepper.previous(),this.$store.state.schedules.plottedActivities=[]},toPreviewActivity:function(){this.$refs.activityRef.toPreview(),this.$refs.stepper.next()},seasonEndIsWeekEnd:function(){var t=new Date(this.season.seasonEnd);0===t.getDay()||6===t.getDay()?this.seasonEndError=!1:this.seasonEndError=!0},seasonStartIsWeekEnd:function(){var t=new Date(this.season.seasonStart);0===t.getDay()||6===t.getDay()?this.seasonStartError=!1:this.seasonStartError=!0},editSeason:function(t){this.editSeasonModal=!0},capitalizeAct:function(){try{this.activityName=this.$store.getters["settings/titleCase"](this.activityName)}catch(t){}},capitalize:function(){try{this.courseName=this.$store.getters["settings/titleCase"](this.courseName)}catch(t){}},saveNewCourse2:function(){var t=this;function e(){return s.apply(this,arguments)}function s(){return s=n()(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.newCourseRef.saveNewCourse2();case 2:s=e.sent,t.season.course=s;case 4:case"end":return e.stop()}},e,this)})),s.apply(this,arguments)}e()},saveNewCourse:function(){var t=this;this.$v.courseName.$touch(),this.capitalize();var e={courseName:this.courseName,courseValue:this.courseName.toLowerCase(),activities:this.newCourseActivities};this.$v.courseName.$error||this.$store.getters["settings/isExistCourses"](this.courseName)?this.$q.notify("Please review fields"):this.$q.dialog({title:"Confirmation",message:"Do you want to add new ".concat(this.courseName,"?"),ok:"Yes",cancel:"No"}).then(function(){t.$database.ref("settings/courses").push(e).then(function(e){t.courseModal=!1,t.season.course=e.key}).catch(function(t){console.log("err",t)})}).catch(function(){})},saveArrangement:function(){this.newCourseActivities=this.activityArrangement,this.arrangeModal=!1},isDontMove:function(t){return"orientation"!==t.value&&"payment"!==t.value&&"final event"!==t.value&&"photoshoot"!==t.value&&"photoliking"!==t.value&&t.value!==this.getLastActivity.value?"open_with":""},arrangement:function(){this.activityArrangement=c()(this.newCourseActivities),this.arrangeModal=!0},checkMove:function(t){t.relatedContext.list.length;return"orientation"!==t.draggedContext.element.value&&"payment"!==t.draggedContext.element.value&&0!==t.draggedContext.futureIndex&&"final event"!==t.draggedContext.element.value&&"general_rehersal"!==t.draggedContext.element.value&&t.draggedContext.futureIndex!==t.relatedContext.list.length-1&&"photoshoot"!==t.draggedContext.element.value&&"photoliking"!==t.draggedContext.element.value&&t.draggedContext.futureIndex>3&&t.draggedContext.element.value!==this.getLastActivity.value},editModeActivity:function(t,e){this.dayAfter.dateNumber=t.dayAfter.dateNumber,this.dayAfter.dateType=t.dayAfter.dateType,this.activityName=t.label,this.activityStatus.details=t.details,this.activityStatus.dueDate=t.dueDate,this.activityStatus.location=t.location,this.activityStatus.time=t.time,this.activityIndex=e,this.isEditNewActivity=!0,this.$forceUpdate(),this.newActivityModal=!0},addNewCourseActivity:function(){if(this.isEditNewActivity)if(this.$v.activityName.$touch(),this.$v.activityName.$error)this.$q.notify("Please Enter Activity Name");else{var t={dayAfter:this.dayAfter,label:this.$store.getters["settings/titleCase"](this.activityName),value:this.activityName.toLowerCase(),details:this.activityStatus.details,dueDate:this.activityStatus.dueDate,location:this.activityStatus.location,time:this.activityStatus.time,visible:!0};this.newCourseActivities[this.activityIndex]=t,this.newActivityModal=!1}else if(this.$v.activityName.$touch(),this.$v.activityName.$error)this.$q.notify("Please Enter Activity Name");else{var e={dayAfter:this.dayAfter,label:this.$store.getters["settings/titleCase"](this.activityName),value:this.activityName.toLowerCase(),details:this.activityStatus.details,dueDate:this.activityStatus.dueDate,location:this.activityStatus.location,time:this.activityStatus.time,visible:!0};this.newCourseActivities.splice(5,0,e),this.newActivityModal=!1}},search:function(t,e){var s=this;setTimeout(function(){e(Object(u["a"])(t,{field:"value",list:s.parseActivities}))},1e3)},removeActivity:function(t){this.newCourseActivities.splice(t,1)},isEditActivity:function(t){return"orientation"!==t},dontDelete:function(t){return"orientation"!==t&&"payment"!==t&&"photoshoot"!==t&&"photoliking"!==t&&"general rehersal"!==t&&"final event"!==t&&t!==this.getLastActivity.value},isOutDatedBatches:function(){},removeComma:function(t){return t.replace(",","")},standbySeason:function(t){var e=this;this.$q.dialog({title:"Cancel Season",message:"Do you want to cancel ".concat(t.eventName," Season ").concat(t.seasonNumber,"?"),ok:"Yes",cancel:"No"}).then(function(){e.$store.dispatch("users/standBySeason",t)}).catch(function(){})},launchSeason:function(t){var e=this;this.$q.dialog({title:"Confirmation",message:"Do you want to launch ".concat(t.eventName," Season ").concat(t.seasonNumber,"?"),ok:"Yes",cancel:"No"}).then(function(){e.$store.dispatch("users/launchSeason",t)}).catch(function(){})},isHasBatches:function(t){var e=this,s=this.$lodash.filter(this.schedules,function(s){return s.eventKey===e.eventKey&&s.seasonNumber===t.seasonNumber});return!(s.length>=1)},isSeasonOngoing:function(t){return"open"!==t.status},deleteSeason:function(t){var e=this;this.$lodash.findIndex(this.events,function(e){return e[".key"]===t.eventKey});this.$q.dialog({title:"Delete Confirmation",message:"Do you want to remove Season ".concat(t.seasonNumber,"?"),ok:"Yes",cancel:"No"}).then(function(){e.$store.dispatch("users/deleteSeason2",{eventKey:e.eventKey,seasonNo:t.seasonNumber})}).catch(function(){})},getSeasonStart:function(t){return t.row.seasonStart},viewBatches:function(t){this.$router.push("/eventseason/".concat(t.eventKey,"/").concat(t.seasonNumber,"/seasonBatches"))},clearSeasonModal:function(){},createActivity2:function(){},createActivity:function(){this.checkIfHasSavedDraft&&(this.$store.state.schedules.tempSeasonDraft=this.seasonDraft[0].season),this.$store.state.schedules.numberOfWorkshops=this.season.numberOfWorkshops,this.$refs.stepper.next()},viewActivities:function(){this.$store.state.users.newSeason=this.season,this.$store.state.users.isNewSeasonActivities=!0,this.$refs.activityRef.saveSeasonActivities()},addNewSeason:function(){var t=this;this.$q.dialog({title:"Save Confirmation",message:"Do you want to save?",ok:"Yes",cancel:"No"}).then(function(){t.$store.dispatch("users/addNewSeason",{event:t.event[0],season:t.season})}).catch(function(){})},isSeasonBatchNotComplete:function(t){for(var e=this.$store.getters["users/getSeasonBatches"]({eventKey:this.eventKey,seasonNumber:t.seasonNumber}),s=e[0],a=!1,i=0;i<s.length;i++)s[i].dueDate||s[i].amount||""!==s[i].location&&""!==s[i].details||(s[i],a=!0,i=s.length);a?this.$q.dialog({title:"Failed to Launch",message:"Batch ".concat(e[0].batchNumber," has less details to launch")}):this.launchSeason(t)},getNumOfParticipants:function(t){var e=this,s=this.$lodash.filter(this.contractSigned,function(s){var a=parseInt(s.seasonName.match(/\d+/g)[0]);return s.eventKey===e.eventKey&&a===parseInt(t.seasonNumber)});return s.length},getSeasonBatches:function(t){var e=this.$lodash.filter(this.schedules,function(e){return e.seasonName===t});return e},hasMissingDetails:function(t){for(var e=this.getSeasonBatches(t.row.seasonName),s=0;s<e.length;s++)for(var a=0;a<e[s].activities.length;a++)if(!e[s].activities[a].dueDate&&!e[s].activities[a].amount&&(""===e[s].activities[a].location||""===e[s].activities[a].details))return!0;return!1},confirmActivities:function(){this.$refs.previewRef.saveNewSeasonBatchActivity()},test:function(){var t=this.$store.state.startUp.schedules,e=[];t.forEach(function(t){e.push(t.activities)});for(var s=this.$lodash.spread(this.$lodash.union)(e),a=this.$lodash.uniqBy(s,"location"),i=new Array,o=0;o<a.length;o++)a[o].location&&i.push({label:Array(a[o].location).join(),value:Array(a[o].location).join()});var n=this.$lodash.uniqBy(i,"label");return n},test2:function(){console.log("seasonDraft",this.seasonDraft)}}},W=_,Y=(s("Ztag"),Object(f["a"])(W,a,i,!1,null,null,null));e["default"]=Y.exports},WiTu:function(t,e,s){},WoL8:function(t,e,s){"use strict";var a=s("3Wue"),i=s.n(a);i.a},Ztag:function(t,e,s){"use strict";var a=s("WiTu"),i=s.n(a);i.a}}]);